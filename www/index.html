<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#0a0f2d">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- Primary Meta Tags -->
    <title>KLSR Radio | Kingdom Lifestyle</title>
    <meta name="description" content="24/7 gospel, inspiration, and transformation. Dual-language broadcasts, podcasts, and Christ-centered outreach.">
    
    <!-- Preload Critical Resources -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Playfair+Display:wght@400;700&display=swap" as="style">
    <link rel="preload" href="https://unpkg.com/aos@2.3.1/dist/aos.css" as="style">
    
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <!-- AOS CSS -->
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">

    <style>
        /* Loading Screen Styles - WHITE TEXT, NO WHITE BACKGROUND */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #05081a !important; /* Ensure dark background */
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .book-container {
            width: 300px;
            height: 400px;
            perspective: 1500px;
            position: relative;
            margin-bottom: 40px;
        }

        @media (max-width: 768px) {
            .book-container {
                width: 250px;
                height: 350px;
            }
        }

        @media (max-width: 480px) {
            .book-container {
                width: 300px;
                height: 400px;
            }
        }

        .book {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transform: rotateY(-10deg);
            transition: transform 1.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }

        .book-cover {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #0a0f2d 0%, #1a235c 100%);
            border-radius: 5px 20px 20px 5px;
            box-shadow: 
                inset 0 0 0 2px rgba(212, 175, 55, 0.3),
                inset 0 0 60px rgba(0, 0, 0, 0.5),
                0 20px 50px rgba(0, 0, 0, 0.8);
            transform-origin: left center;
            transform: rotateY(0deg);
            transition: transform 1.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            text-align: center;
        }

        .book-cover::before {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            border: 2px solid rgba(212, 175, 55, 0.2);
            border-radius: 3px 15px 15px 3px;
            pointer-events: none;
        }

        /* ALL LOADING TEXT WHITE */
        .loading-screen .welcome-text,
        .loading-screen .motto-text,
        .loading-screen .motto-char {
            color: #ffffff !important;
        }

        .welcome-text {
            font-family: 'Playfair Display', serif;
            font-size: 2.2rem;
            font-weight: 700;
            color: #ffffff; /* White text */
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8); /* Dark shadow for contrast */
            line-height: 1.3;
            padding: 0 20px;
            z-index: 2;
        }

        .motto-container {
            margin-top: 20px;
            min-height: 40px;
            z-index: 2;
        }

        .motto-text {
            font-family: 'Roboto', sans-serif;
            font-size: 1.5rem;
            color: #ffffff !important; /* White text */
            font-weight: 500;
            letter-spacing: 2px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8); /* Dark shadow */
        }

        .motto-char {
            display: inline-block;
            opacity: 0;
            transform: translateY(10px);
            animation: typeChar 0.1s forwards;
            color: #ffffff !important; /* White text */
        }

        @keyframes typeChar {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .book-content {
            position: absolute;
            width: 100%;
            height: 100%;
            background: #05081a !important; /* Dark background instead of white */
            border-radius: 0 5px 5px 0;
            padding: 30px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.1);
            opacity: 0;
            transform: translateX(-20px);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }

        .book-content .welcome-text {
            color: #ffffff !important; /* White text */
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }

        .book-content .motto-text {
            color: #ffffff !important; /* White text */
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }

        .spine {
            position: absolute;
            left: 0;
            top: 20px;
            bottom: 20px;
            width: 20px;
            background: linear-gradient(to right, #05081a 0%, #0a0f2d 100%);
            transform: rotateY(90deg) translateX(-10px);
            box-shadow: inset -5px 0 10px rgba(0, 0, 0, 0.5);
        }

        .pages {
            position: absolute;
            width: 98%;
            height: 96%;
            left: 1%;
            top: 2%;
            background: #1a235c; /* Dark blue instead of white */
            border-radius: 2px;
            transform: rotateY(2deg);
            box-shadow: 
                inset 0 0 50px rgba(0, 0, 0, 0.05),
                0 0 20px rgba(0, 0, 0, 0.1);
            opacity: 0;
            transform-origin: left;
        }

        .loading-progress {
            width: 200px;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
            margin-top: 30px;
        }

        .progress-bar {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #d4af37 0%, #ffd700 100%);
            transition: width 4s linear;
        }

        /* Loading animation classes */
        .loading-screen.loading .book {
            animation: bookFloat 3s ease-in-out infinite;
        }

        .loading-screen.ready .book {
            transform: rotateY(-180deg);
        }

        .loading-screen.ready .book-cover {
            transform: rotateY(-180deg);
        }

        .loading-screen.ready .book-content {
            opacity: 1;
            transform: translateX(0);
            transition-delay: 0.8s;
        }

        .loading-screen.ready .pages {
            opacity: 0.8;
            animation: pageFlip 2s ease-in-out infinite;
        }

        @keyframes bookFloat {
            0%, 100% { transform: rotateY(-10deg) translateY(0); }
            50% { transform: rotateY(-10deg) translateY(-10px); }
        }

        @keyframes pageFlip {
            0%, 100% { transform: rotateY(2deg); }
            50% { transform: rotateY(5deg); }
        }

        /* Hide loading screen after animation */
        .loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease, visibility 0.5s;
        }

        /* Main app hidden during loading */
        .app-wrapper {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease;
        }

        .app-wrapper.loaded {
            opacity: 1;
            visibility: visible;
        }

        /* Material Design Variables - DEEPER BLUE THEME */
        :root {
            /* Deep Blue Theme - Default */
            --mdc-primary: #0a0f2d;
            --mdc-primary-dark: #05081a;
            --mdc-primary-light: #1a235c;
            --mdc-secondary: #ffffff;
            --mdc-secondary-dark: #f0f0f0;
            --mdc-secondary-light: #ffffff;
            
            --mdc-gradient: linear-gradient(135deg, #0a0f2d 0%, #1a235c 100%);
            --mdc-gradient-light: linear-gradient(135deg, #1a235c 0%, #2a3a8f 100%);
            --mdc-gradient-dark: linear-gradient(135deg, #05081a 0%, #0a0f2d 100%);
            
            --mdc-surface: #ffffff;
            --mdc-background: #f5f7ff;
            --mdc-error: #dc3545;
            --mdc-success: #28a745;
            --mdc-warning: #ffc107;
            
            /* Text Colors with High Contrast */
            --mdc-on-primary: #ffffff;
            --mdc-on-secondary: #0a0f2d;
            --mdc-on-surface: #0a0f2d;
            --mdc-on-background: #1a235c;
            --mdc-on-background-light: #4a5699;
            --mdc-on-background-contrast: #ffffff;
            
            --mdc-elevation-1: 0 2px 8px rgba(10, 15, 45, 0.1);
            --mdc-elevation-2: 0 4px 12px rgba(10, 15, 45, 0.15);
            --mdc-elevation-3: 0 6px 20px rgba(10, 15, 45, 0.2);
            --mdc-elevation-4: 0 8px 24px rgba(10, 15, 45, 0.25);
            
            --mdc-border-radius: 12px;
            --mdc-border-radius-sm: 8px;
            --mdc-border-radius-lg: 16px;
            --mdc-border-radius-xl: 24px;
            
            --mdc-spacing-xs: 8px;
            --mdc-spacing-sm: 12px;
            --mdc-spacing-md: 16px;
            --mdc-spacing-lg: 24px;
            --mdc-spacing-xl: 32px;
            --mdc-spacing-xxl: 48px;
            
            --mdc-font-family: 'Roboto', -apple-system, BlinkMacSystemFont, sans-serif;
            --mdc-font-family-heading: 'Playfair Display', serif;
            
            --safe-area-top: env(safe-area-inset-top);
            --safe-area-bottom: env(safe-area-inset-bottom);
        }

        /* Theme Variables - Only 3 Themes: Deep Blue (Default), Dark  */
        .theme-deep-blue {
            --mdc-primary: #0a0f2d;
            --mdc-primary-dark: #05081a;
            --mdc-secondary: #ffffff;
            --mdc-gradient: linear-gradient(135deg, #0a0f2d 0%, #1a235c 100%);
            --mdc-gradient-light: linear-gradient(135deg, #1a235c 0%, #2a3a8f 100%);
            --mdc-gradient-dark: linear-gradient(135deg, #05081a 0%, #0a0f2d 100%);
            --mdc-surface: #ffffff;
            --mdc-background: #f5f7ff;
            --mdc-on-primary: #ffffff;
            --mdc-on-secondary: #0a0f2d;
            --mdc-on-surface: #0a0f2d;
            --mdc-on-background: #1a235c;
            --mdc-on-background-light: #4a5699;
            --mdc-on-background-contrast: #ffffff;
            --mdc-modal-text: #0a0f2d;
            --mdc-pagination-text: #0a0f2d;
        }

        .theme-dark {
            --mdc-primary: #05081a;
            --mdc-primary-dark: #020410;
            --mdc-secondary: #d4af37;
            --mdc-gradient: linear-gradient(135deg, #05081a 0%, #0a0f2d 100%);
            --mdc-gradient-light: linear-gradient(135deg, #0a0f2d 0%, #1a235c 100%);
            --mdc-gradient-dark: linear-gradient(135deg, #020410 0%, #05081a 100%);
            --mdc-surface: #121212;
            --mdc-background: #0a0a0a;
            --mdc-on-primary: #ffffff;
            --mdc-on-secondary: #ffffff;
            --mdc-on-surface: #ffffff;
            --mdc-on-background: #e0e0e0;
            --mdc-on-background-light: #a0a0a0;
            --mdc-on-background-contrast: #ffffff;
            --mdc-modal-text: #ffffff;
            --mdc-pagination-text: #ffffff;
        }

        /* Reset & Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--mdc-font-family);
            color: var(--mdc-on-surface);
            background: var(--mdc-gradient);
            line-height: 1.6;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Typography with High Contrast */
        h1, h2, h3, h4, h5, h6 {
            font-family: var(--mdc-font-family-heading);
            font-weight: 600;
            line-height: 1.2;
            margin-bottom: var(--mdc-spacing-md);
            color: var(--mdc-on-surface);
        }

        h1 { 
            font-size: 1.75rem; 
            color: var(--mdc-on-surface);
        }
        h2 { 
            font-size: 1.5rem; 
            color: var(--mdc-on-surface);
        }
        h3 { 
            font-size: 1.25rem; 
            color: var(--mdc-on-surface);
        }
        h4 { 
            font-size: 1.1rem; 
            color: var(--mdc-on-surface);
        }
        
        @media (min-width: 768px) {
            h1 { 
                font-size: 2rem; 
                color: var(--mdc-on-surface);
            }
            h2 { 
                font-size: 1.75rem; 
                color: var(--mdc-on-surface);
            }
            h3 { 
                font-size: 1.5rem; 
                color: var(--mdc-on-surface);
            }
            h4 { 
                font-size: 1.25rem; 
                color: var(--mdc-on-surface);
            }
        }

        p, span, li, td, th, div {
            color: var(--mdc-on-surface) !important;
            transition: color 0.3s ease;
        }

        small, .text-muted {
            color: var(--mdc-on-background-light) !important;
        }

        a {
            color: var(--mdc-primary);
            text-decoration: none;
            transition: color 0.2s ease;
        }

        a:hover {
            color: var(--mdc-primary-dark);
        }

        /* Background Overrides for Contrast */
        .mdc-top-app-bar,
        .bottom-player-section,
        .settings-hero {
            color: var(--mdc-on-primary) !important;
        }

        .mdc-top-app-bar h1,
        .mdc-top-app-bar p,
        .mdc-top-app-bar span,
        .bottom-player-section div,
        .bottom-player-section span,
        .settings-hero h1,
        .settings-hero p {
            color: var(--mdc-on-primary) !important;
        }

        /* Container */
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--mdc-spacing-md);
        }

        /* App Layout */
        .app-wrapper {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            padding-top: 64px;
            padding-bottom: 144px;
        }

        /* Top App Bar - Modern Mobile App Style */
        .mdc-top-app-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            height: 64px;
            background: var(--mdc-gradient);
            color: var(--mdc-on-primary);
            box-shadow: var(--mdc-elevation-2);
            padding-top: var(--safe-area-top);
            transition: background 0.3s ease;
        }

        .top-app-bar-content {
            display: flex;
            align-items: center;
            height: 100%;
            padding: 0 var(--mdc-spacing-md);
            max-width: 1200px;
            margin: 0 auto;
        }

        .app-logo {
            display: flex;
            align-items: center;
            gap: var(--mdc-spacing-sm);
            margin-right: auto;
        }

        .app-logo-img {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: 2px solid var(--mdc-secondary);
            object-fit: cover;
            background: #000;
            padding: 2px;
        }

        .app-logo-text {
            font-family: var(--mdc-font-family-heading);
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--mdc-on-primary);
            white-space: nowrap;
        }

        .top-app-bar-actions {
            display: flex;
            align-items: center;
            gap: var(--mdc-spacing-xs);
        }

        .icon-button {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: transparent;
            border: none;
            color: var(--mdc-on-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .icon-button:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .icon-button.active {
            background-color: rgba(255, 255, 255, 0.2);
        }

        /* Bottom App Bar with Integrated Player */
        .bottom-app-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: var(--mdc-surface);
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            padding-bottom: var(--safe-area-bottom);
            transition: background-color 0.3s ease;
        }

        .bottom-player-section {
            background: var(--mdc-gradient);
            color: var(--mdc-on-primary);
            padding: var(--mdc-spacing-xs) var(--mdc-spacing-md);
            transition: background 0.3s ease;
        }

        .player-controls {
            display: flex;
            align-items: center;
            gap: var(--mdc-spacing-md);
        }

        .player-info {
            flex: 1;
            min-width: 0;
        }

        .player-title {
            font-weight: 500;
            font-size: 0.9rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            color: var(--mdc-on-primary);
        }

        .player-subtitle {
            font-size: 0.8rem;
            opacity: 0.9;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            color: var(--mdc-on-primary);
        }

        .player-buttons {
            display: flex;
            align-items: center;
            gap: var(--mdc-spacing-xs);
        }

        .player-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: var(--mdc-on-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .player-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        .player-btn.primary {
            background: var(--mdc-secondary);
            color: var(--mdc-on-secondary);
        }

        .bottom-nav-section {
            padding: var(--mdc-spacing-xs) 0;
            background: var(--mdc-gradient);
            color: var(--mdc-on-primary);
        }

        .bottom-nav {
            display: flex;
            justify-content: space-around;
            list-style: none;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding: var(--mdc-spacing-xs) var(--mdc-spacing-sm);
            color: var(--mdc-on-surface); 
            opacity: 0.7;
            cursor: pointer;
            transition: all 0.2s ease;
            flex: 1;
            max-width: 80px;
            border: none;
            border-radius:10px;
            margin:5px;
            background:  var(--mdc-secondary);
            font-family: inherit;
            
        }

        .nav-item.active {
            color: var(--mdc-primary);
            opacity: 1;
        }
 
        .nav-icon {
            font-size: 30px;
             
        }

        .nav-label {
            font-size: 0.65rem;
            font-weight: 600;
            text-align: center;
            
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: var(--mdc-spacing-lg) 0;
            animation: fadeIn 0.3s ease;
        }

        .page-content {
            display: none;
            min-height: calc(100vh - 144px);
        }

        .page-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Material Cards - Enhanced for Contrast */
        .mdc-card {
            background: var(--mdc-surface);
            border-radius: var(--mdc-border-radius);
            box-shadow: var(--mdc-elevation-1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
            margin-bottom: var(--mdc-spacing-lg);
            border: 1px solid rgba(10, 15, 45, 0.1);
        }

        .mdc-card:hover {
            box-shadow: var(--mdc-elevation-2);
        }

        .mdc-card h1, 
        .mdc-card h2, 
        .mdc-card h3, 
        .mdc-card h4, 
        .mdc-card h5, 
        .mdc-card h6,
        .mdc-card p,
        .mdc-card span,
        .mdc-card div {
            color: var(--mdc-on-surface) !important;
        }

        .card-header {
            padding: var(--mdc-spacing-lg);
            border-bottom: 1px solid rgba(10, 15, 45, 0.1);
        }

        .card-content {
            padding: var(--mdc-spacing-lg);
        }

        .card-actions {
            padding: var(--mdc-spacing-md) var(--mdc-spacing-lg);
            border-top: 1px solid rgba(10, 15, 45, 0.1);
            display: flex;
            gap: var(--mdc-spacing-sm);
            flex-wrap: wrap;
        }

        /* Buttons */
        .mdc-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px 20px;
            background: var(--mdc-gradient);
            color: var(--mdc-on-primary);
            border: none;
            border-radius: var(--mdc-border-radius);
            font-family: var(--mdc-font-family);
            font-weight: 500;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: var(--mdc-elevation-1);
            gap: 8px;
            min-height: 44px;
        }

        .mdc-button:hover {
            background: var(--mdc-gradient-dark);
            box-shadow: var(--mdc-elevation-2);
            transform: translateY(-1px);
        }

        .mdc-button:active {
            transform: translateY(0);
        }

        .mdc-button.outlined {
            background: transparent;
            color: var(--mdc-primary);
            border: 2px solid var(--mdc-primary);
            box-shadow: none;
        }

        .mdc-button.text {
            background: transparent;
            color: var(--mdc-primary);
            box-shadow: none;
            padding: 8px 16px;
            text-transform: none;
            letter-spacing: normal;
        }

        /* Grid System */
        .mdc-grid {
            display: grid;
            gap: var(--mdc-spacing-lg);
        }

        .grid-1 { grid-template-columns: 1fr; }
        .grid-2 { grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); }
        .grid-3 { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
        .grid-4 { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }

        /* Home Page Hero Slider */
        .hero-slider {
            position: relative;
            height: 60vh;
            min-height: 400px;
            border-radius: var(--mdc-border-radius-xl);
            overflow: hidden;
            margin-bottom: var(--mdc-spacing-xl);
        }

        .hero-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
            background-size: cover;
            background-position: center;
        }

        .hero-slide.active {
            opacity: 1;
        }

        .hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, transparent, rgba(0,0,0,0.7));
            display: flex;
            align-items: flex-end;
            padding: var(--mdc-spacing-xl);
        }

        .hero-content h1 {
            color: var(--mdc-on-primary);
            font-size: 2rem;
            margin-bottom: var(--mdc-spacing-sm);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .hero-content p {
            color: rgba(255,255,255,0.9);
            font-size: 1.1rem;
            margin-bottom: var(--mdc-spacing-md);
        }

        /* Podcast Page Hero Section */
        .podcast-hero {
            background: var(--mdc-gradient);
            color: var(--mdc-on-primary);
            padding: var(--mdc-spacing-xl) 0;
            margin-bottom: var(--mdc-spacing-xl);
            border-radius: var(--mdc-border-radius-lg);
            text-align: center;
        }

        .podcast-hero-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 var(--mdc-spacing-md);
        }

        .podcast-hero h1 {
            color: var(--mdc-on-primary);
            font-size: 2rem;
            margin-bottom: var(--mdc-spacing-sm);
        }

        .podcast-hero p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.1rem;
            margin-bottom: var(--mdc-spacing-lg);
        }

        /* Podcast Items */
        .podcast-item {
            margin-bottom: var(--mdc-spacing-lg);
            padding: var(--mdc-spacing-lg);
            background: var(--mdc-surface);
            border-radius: var(--mdc-border-radius);
            border: 1px solid rgba(10, 15, 45, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .podcast-item:hover {
            box-shadow: var(--mdc-elevation-2);
            transform: translateY(-2px);
        }

        .podcast-item img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: var(--mdc-border-radius);
            margin-bottom: var(--mdc-spacing-md);
            background: var(--mdc-gradient);
        }

        .podcast-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            color: var(--mdc-on-background-light);
            margin-bottom: var(--mdc-spacing-sm);
            align-items: center;
            flex-wrap: wrap;
            gap: var(--mdc-spacing-sm);
        }

        .podcast-meta span {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        /* Podcast Player */
        .podcast-player {
            margin-bottom: var(--mdc-spacing-lg);
            background: var(--mdc-surface);
            border-radius: var(--mdc-border-radius);
            padding: var(--mdc-spacing-lg);
            box-shadow: var(--mdc-elevation-1);
        }

        .podcast-player audio {
            width: 100%;
            border-radius: var(--mdc-border-radius);
            margin-top: var(--mdc-spacing-md);
        }

        /* Search Section */
        .search-section {
            margin-bottom: var(--mdc-spacing-xl);
        }

        .search-box {
            position: relative;
            max-width: 600px;
            margin: 0 auto;
        }

        .search-box input {
            width: 100%;
            padding: 12px 20px 12px 48px;
            border: 2px solid rgba(10, 15, 45, 0.1);
            border-radius: var(--mdc-border-radius-xl);
            font-family: var(--mdc-font-family);
            font-size: 1rem;
            background: var(--mdc-surface);
            color: var(--mdc-on-surface);
            transition: all 0.3s ease;
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--mdc-primary);
            box-shadow: 0 0 0 3px rgba(10, 15, 45, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--mdc-on-background-light);
        }

        /* Pagination - Fixed Text Color */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: var(--mdc-spacing-sm);
            margin-top: var(--mdc-spacing-xl);
            flex-wrap: wrap;
        }

        .page-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--mdc-surface);
            color: var(--mdc-pagination-text) !important;
            border: 1px solid rgba(10, 15, 45, 0.1);
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.875rem;
        }

        .page-btn:hover {
            background: var(--mdc-gradient);
            color: var(--mdc-on-primary) !important;
            border-color: var(--mdc-primary);
        }

        .page-btn.active {
            background: var(--mdc-gradient);
            color: var(--mdc-on-primary) !important;
        }

        .page-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Share Buttons */
        .share-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: var(--mdc-spacing-sm);
            margin-top: var(--mdc-spacing-lg);
        }

        .share-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            padding: 8px 12px;
            border-radius: var(--mdc-border-radius);
            font-size: 0.75rem;
            font-weight: 500;
            text-decoration: none;
            transition: all 0.2s ease;
            border: none;
            cursor: pointer;
            color: white !important;
            min-width: 100px;
            flex: 1;
        }

        .share-btn i {
            font-size: 16px;
            color: white !important;
        }

        .share-facebook { background: #1877F2; }
        .share-twitter { background: #000000; }
        .share-whatsapp { background: #25D366; }
        .share-telegram { background: #0088CC; }
        .share-linkedin { background: #0A66C2; }
        .share-email { background: #666666; }
        .share-copy { background: var(--mdc-primary); }

        .share-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        /* Form Styles */
        .mdc-textfield {
            margin-bottom: var(--mdc-spacing-lg);
        }

        .mdc-textfield label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: var(--mdc-on-surface);
            font-size: 0.875rem;
        }

        .mdc-textfield input,
        .mdc-textfield textarea,
        .mdc-textfield select {
            width: 100%;
            padding: 12px;
            border: 2px solid rgba(10, 15, 45, 0.1);
            border-radius: var(--mdc-border-radius-sm);
            font-family: var(--mdc-font-family);
            font-size: 1rem;
            transition: all 0.2s ease;
            background: var(--mdc-surface);
            color: var(--mdc-on-surface);
        }

        .mdc-textfield input:focus,
        .mdc-textfield textarea:focus {
            outline: none;
            border-color: var(--mdc-primary);
            box-shadow: 0 0 0 3px rgba(10, 15, 45, 0.1);
        }

        /* Settings Page - Enhanced for Mobile */
        .settings-hero {
            background: var(--mdc-gradient);
            color: var(--mdc-on-primary);
            padding: var(--mdc-spacing-xl) var(--mdc-spacing-lg);
            margin-bottom: var(--mdc-spacing-xl);
            border-radius: var(--mdc-border-radius-lg);
            text-align: center;
        }

        .settings-hero-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: var(--mdc-spacing-md);
            max-width: 1200px;
            margin: 0 auto;
        }

        .settings-hero-content > div {
            text-align: left;
            flex: 1;
            min-width: 250px;
        }

        .settings-hero-content .mdc-button {
            min-width: 120px;
        }

        .settings-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--mdc-spacing-md);
            border-bottom: 1px solid rgba(10, 15, 45, 0.1);
            flex-wrap: wrap;
            gap: var(--mdc-spacing-sm);
        }

        .settings-item:last-child {
            border-bottom: none;
        }

        .settings-info {
            flex: 1;
            min-width: 200px;
        }

        .settings-title {
            font-weight: 500;
            margin-bottom: 2px;
            color: var(--mdc-on-surface);
        }

        .settings-description {
            font-size: 0.875rem;
            color: var(--mdc-on-background-light);
        }

        /* Switch */
        .mdc-switch {
            position: relative;
            display: inline-block;
            width: 52px;
            height: 32px;
            flex-shrink: 0;
        }

        .mdc-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .mdc-switch-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .mdc-switch-slider:before {
            position: absolute;
            content: "";
            height: 24px;
            width: 24px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .mdc-switch-slider {
            background-color: var(--mdc-primary);
        }

        input:checked + .mdc-switch-slider:before {
            transform: translateX(20px);
        }

        /* Slider */
        .mdc-slider {
            width: 100px;
            height: 4px;
            background: rgba(10, 15, 45, 0.1);
            border-radius: 2px;
            outline: none;
            -webkit-appearance: none;
            flex-shrink: 0;
        }

        .mdc-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--mdc-primary);
            cursor: pointer;
            border: 2px solid white;
            box-shadow: var(--mdc-elevation-1);
        }

        .mdc-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--mdc-primary);
            cursor: pointer;
            border: 2px solid white;
            box-shadow: var(--mdc-elevation-1);
        }

        /* Select Dropdown */
        .mdc-select {
            padding: 8px 12px;
            border: 1px solid rgba(10, 15, 45, 0.1);
            border-radius: var(--mdc-border-radius-sm);
            background: var(--mdc-surface);
            color: var(--mdc-on-surface);
            font-family: var(--mdc-font-family);
            font-size: 0.875rem;
            min-width: 150px;
            flex-shrink: 0;
        }

        /* Channel Switcher */
        .channel-switcher {
            position: fixed;
            bottom: 144px;
            right: var(--mdc-spacing-md);
            background: var(--mdc-surface);
            border-radius: var(--mdc-border-radius);
            box-shadow: var(--mdc-elevation-3);
            padding: var(--mdc-spacing-md);
            z-index: 999;
            transform: translateY(20px);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            min-width: 200px;
        }

        .channel-switcher.active {
            transform: translateY(0);
            opacity: 1;
            visibility: visible;
        }

        .channel-option {
            display: flex;
            align-items: center;
            gap: var(--mdc-spacing-sm);
            padding: var(--mdc-spacing-sm);
            cursor: pointer;
            border-radius: var(--mdc-border-radius-sm);
            transition: background-color 0.2s ease;
            color: var(--mdc-modal-text) !important;
        }

        .channel-option:hover {
            background-color: rgba(10, 15, 45, 0.05);
        }

        .channel-option.active {
            background-color: rgba(10, 15, 45, 0.1);
            color: var(--mdc-primary) !important;
        }

        /* More Modal */
        .more-modal {
            position: fixed;
            top: 64px;
            right: var(--mdc-spacing-md);
            background: var(--mdc-surface);
            border-radius: var(--mdc-border-radius);
            box-shadow: var(--mdc-elevation-3);
            padding: var(--mdc-spacing-sm);
            z-index: 1100;
            min-width: 200px;
            display: none;
        }

        .more-modal.active {
            display: block;
        }

        .more-modal .mdc-button.text {
            justify-content: flex-start;
            width: 100%;
            color: var(--mdc-modal-text) !important;
        }

        .more-modal .mdc-button.text i {
            color: var(--mdc-modal-text) !important;
        }

        /* Loading Spinner */
        .loading-spinner {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: var(--mdc-spacing-xxl);
            color: var(--mdc-on-background);
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(10, 15, 45, 0.1);
            border-top-color: var(--mdc-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: var(--mdc-spacing-md);
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Alert Messages */
        .alert {
            padding: var(--mdc-spacing-md);
            border-radius: var(--mdc-border-radius);
            margin-bottom: var(--mdc-spacing-lg);
            animation: slideIn 0.3s ease;
            background: var(--mdc-surface);
            border-left: 4px solid var(--mdc-primary);
            color: var(--mdc-on-surface);
        }

        .alert-success {
            border-left-color: var(--mdc-success);
        }

        .alert-error {
            border-left-color: var(--mdc-error);
        }

        @keyframes slideIn {
            from { transform: translateY(-10px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Responsive Design */
        @media (max-width: 767px) {
            .app-wrapper {
                padding-top: 56px;
                padding-bottom: 136px;
            }
            
            .mdc-top-app-bar {
                height: 56px;
            }
            
            .app-logo-text {
                font-size: 1rem;
            }
            
            .hero-slider {
                height: 50vh;
                min-height: 300px;
            }
            
            .hero-content h1 {
                font-size: 1.5rem;
            }
            
            .grid-2, .grid-3, .grid-4 {
                grid-template-columns: 1fr;
            }
            
            .nav-icon {
                font-size: 18px;
            }
            
            .nav-label {
                font-size: 0.6rem;
            }
            
            .settings-hero-content {
                flex-direction: column;
                text-align: center;
            }
            
            .settings-hero-content > div {
                text-align: center;
                width: 100%;
            }
            
            .settings-item {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--mdc-spacing-sm);
            }
            
            .settings-info {
                width: 100%;
            }
            
            .mdc-slider {
                width: 100%;
            }
            
            .mdc-select {
                width: 100%;
            }
            
            .podcast-item img {
                height: 150px;
            }
            
            .podcast-meta {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--mdc-spacing-xs);
            }
            
            .podcast-hero h1 {
                font-size: 1.5rem;
            }
            
            .podcast-hero p {
                font-size: 1rem;
            }
            
            .share-btn {
                min-width: calc(50% - 6px);
                font-size: 0.7rem;
                padding: 6px 8px;
            }
            
            .more-modal {
                top: 56px;
                right: var(--mdc-spacing-sm);
                left: var(--mdc-spacing-sm);
                min-width: auto;
            }
            
            .channel-switcher {
                right: var(--mdc-spacing-sm);
                left: var(--mdc-spacing-sm);
                min-width: auto;
            }
        }

        @media (min-width: 768px) and (max-width: 1023px) {
            .app-wrapper {
                padding-bottom: 136px;
            }
            
            .grid-3 {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .hero-slider {
                height: 55vh;
            }
            
            .settings-hero-content {
                flex-direction: row;
            }
            
            .share-btn {
                min-width: calc(33.333% - 8px);
            }
        }

        @media (min-width: 1024px) {
            .bottom-nav {
                max-width: 500px;
                margin: 0 auto;
            }
            
            .hero-slider {
                height: 65vh;
                max-height: 600px;
            }
            
            .share-btn {
                min-width: calc(20% - 8px);
            }
        }

        /* Utility Classes */
        .text-center { text-align: center; }
        .text-primary { color: var(--mdc-primary) !important; }
        .text-secondary { color: var(--mdc-secondary) !important; }
        .mb-1 { margin-bottom: var(--mdc-spacing-sm); }
        .mb-2 { margin-bottom: var(--mdc-spacing-md); }
        .mb-3 { margin-bottom: var(--mdc-spacing-lg); }
        .mb-4 { margin-bottom: var(--mdc-spacing-xl); }
        .mt-1 { margin-top: var(--mdc-spacing-sm); }
        .mt-2 { margin-top: var(--mdc-spacing-md); }
        .mt-3 { margin-top: var(--mdc-spacing-lg); }
        .mt-4 { margin-top: var(--mdc-spacing-xl); }
        .p-1 { padding: var(--mdc-spacing-sm); }
        .p-2 { padding: var(--mdc-spacing-md); }
        .p-3 { padding: var(--mdc-spacing-lg); }
        .p-4 { padding: var(--mdc-spacing-xl); }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(10, 15, 45, 0.05);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(10, 15, 45, 0.2);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(10, 15, 45, 0.3);
        }
    </style>
</head>
<body class="theme-deep-blue">
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="book-container">
            <div class="book">
                <div class="book-cover">
                    <img src="images/logo.png" style="height:50px; width:50px;">
                    <div class="welcome-text">Welcome to Kingdom Lifestyle Radio</div>
                    <div class="motto-container">
                        <div class="motto-text" id="mottoText"></div>
                    </div>
                    <div class="spine"></div>
                </div>
                <div class="book-content">
                    <div class="welcome-text">Welcome to Kingdom Lifestyle Radio</div>
                    <div class="motto-container">
                        <div class="motto-text">God Is Great</div>
                    </div> 
                </div>
                 <div class="pages"></div>
            </div>
        </div>
        <div class="loading-progress">
            <div class="progress-bar" id="progressBar"></div>
        </div>
    </div>

    <!-- Top App Bar -->
    <header class="mdc-top-app-bar">
        <div class="top-app-bar-content">
            <div class="app-logo">
                <div class="app-logo-img">  <img src="images/logo.png" style="height:30px ; width:30px ;" >
                </div>
                <span class="app-logo-text">KLSR Radio</span> 
            </div>
            <div class="top-app-bar-actions">
                <button class="icon-button" id="searchBtn" aria-label="Search">
                    <i class="material-icons">search</i>
                </button>
                <button class="icon-button" id="settingsBtn" aria-label="Settings">
                    <i class="material-icons">settings</i>
                </button>
            </div>
        </div>
    </header>

    <!-- More Options Modal -->
    <div class="more-modal" id="moreModal">
        <div style="display: flex; flex-direction: column; gap: 4px;">
            <button class="mdc-button text" onclick="navigateTo('about')">
                <i class="material-icons">info</i> About Us
            </button>
            <button class="mdc-button text" onclick="navigateTo('donation')">
                <i class="material-icons">volunteer_activism</i> Donate
            </button>
            <button class="mdc-button text" onclick="navigateTo('contact')">
                <i class="material-icons">contact_support</i> Contact
            </button>
            <button class="mdc-button text" onclick="navigateTo('settings')">
                <i class="material-icons">settings</i> Settings
            </button>
        </div>
    </div>

    <!-- Main App Content -->
    <div class="app-wrapper" id="appWrapper">
        <main class="main-content" id="mainContent">
            <!-- Home Page -->
            <div class="page-content active" id="home-page">
                <div class="container">
                    <!-- Hero Slider -->
                    <div class="hero-slider" id="homeHeroSlider">
                        <div class="hero-slide active" style="background-image: linear-gradient(rgba(10, 15, 45, 0.7), rgba(10, 15, 45, 0.7)), url('images/herr1.webp');"></div>
                        <div class="hero-slide" style="background-image: linear-gradient(rgba(10, 15, 45, 0.7), rgba(10, 15, 45, 0.7)), url('images/herr4.webp');"></div> 
                         <div class="hero-slide" style="background-image: linear-gradient(rgba(10, 15, 45, 0.7), rgba(10, 15, 45, 0.7)), url('images/herr3.webp');"></div>
                         <div class="hero-overlay">
                            <div class="hero-content">
                                <h1 style="text-shadow:1px 0px 1px #fff;">Kingdom Lifestyle Radio</h1>
                                <p style="text-shadow:1px 0px 1px #fff;">24/7 Gospel Inspiration & Transformation</p>
                                <button class="mdc-button mt-2" onclick="toggleRadioPlay()">
                                    <i class="material-icons">radio</i>
                                    Listen Live
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="mdc-grid grid-3 mb-4">
                        <div class="mdc-card" onclick="navigateTo('podcast')" style="cursor: pointer;">
                            <div class="card-content text-center">
                                <i class="material-icons" style="font-size: 48px; color: var(--mdc-primary); text-shadow:1px 0px 1px #fff;">podcasts</i>
                                <h3>Podcasts</h3>
                                <p>Listen to uplifting teachings</p>
                            </div>
                        </div>
                        <div class="mdc-card" onclick="navigateTo('prayer')" style="cursor: pointer;">
                            <div class="card-content text-center">
                                
<i class="material-icons" style="font-size: 48px; color: var(--mdc-primary); text-shadow:1px 0px 1px #fff;">self_improvement</i>

                                <h3>Prayer</h3>
                                <p>Submit prayer requests</p>
                            </div>
                        </div>
                        <div class="mdc-card" onclick="navigateTo('donation')" style="cursor: pointer;">
                            <div class="card-content text-center">
                                <i class="material-icons" style="font-size: 48px; color: var(--mdc-primary); text-shadow:1px 0px 1px #fff;">volunteer_activism</i>
                                <h3>Donate</h3>
                                <p>Support our mission</p>
                            </div>
                        </div>
                    </div>

               
                </div>
            </div>

            <!-- Podcast Page -->
            <div class="page-content" id="podcast-page">
                <div class="container">
                    <!-- Podcast Hero Section -->
                    <div class="podcast-hero" style="background-image: linear-gradient(rgba(10, 15, 45, 0.7), rgba(10, 15, 45, 0.7)), url('images/herr2.webp'); background-size:cover;"> 
                        <div class="podcast-hero-content">
      <img src="images/hepp.webp" width="300" height="300" style="border-radius:10px;" >                    
                            
                            <h1 style="text-shadow:1px 0px 1px #fff;"> </h1>
                            <p style="text-shadow:1px 0px 1px #fff;"> </p>
                            <div id="podcastStats" style="display: none;">
                                <p style="text-shadow:1px 0px 1px #fff;"><strong id="podcastCount">0</strong> episodes available</p>
                            </div>
                        </div>
                    </div>

                    <!-- Current Podcast Player -->
                    <div class="podcast-player" id="currentPodcastPlayer" style="display: none;">
                        <h3>Now Playing</h3>
                        <div id="currentPodcastInfo"></div>
                        <audio id="podcastAudio" controls>
                            Your browser does not support the audio element.
                        </audio>
                    </div>

                    <!-- Podcast Loading -->
                    <div id="podcastLoading" class="loading-spinner">
                        <div class="spinner"></div>
                        <p>Loading podcasts...</p>
                    </div>

                    <!-- Podcast List -->
                    <div id="podcastList" style="display: none;"></div>

                    <!-- Podcast Pagination -->
                    <div class="pagination" id="podcastPagination" style="display: none; margin-top: var(--mdc-spacing-xl);"></div>
                </div>
            </div>

            <!-- Blog Page -->               
<div class="page-content" id="blog-page">
    <div class="container">
        <!-- Hero Section - Latest Blog Carousel -->
        <div style="
            position: relative;
            height: 450px;
            margin-bottom: 40px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        ">
            <div id="blogHeroSlider" style="
                height: 100%;
                width: 100%;
                position: relative;
            ">
                <!-- Slides will be dynamically inserted here -->
            </div>
            
            <!-- Navigation Arrows -->
            <button id="heroPrevBtn" style="
                position: absolute;
                left: 25px;
                top: 50%;
                transform: translateY(-50%);
                background: rgba(255,255,255,0.95);
                border: none;
                width: 50px;
                height: 50px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                z-index: 10;
                box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                transition: all 0.3s ease;
       text-shadow:1px 0px 1px #05081a;         
                
            " onmouseover="this.style.background='white'; this.style.transform='translateY(-50%) scale(1.1)'" onmouseout="this.style.background='rgba(255,255,255,0.95)'; this.style.transform='translateY(-50%) scale(1)'">
                <span class="material-icons" style="color: #333; font-size: 28px; font-weight: bold;">chevron_left</span>
            </button>
            
            <button id="heroNextBtn" style="
                position: absolute;
                right: 25px;
                top: 50%;
                transform: translateY(-50%);
                background: rgba(255,255,255,0.95);
                border: none;
                width: 50px;
                height: 50px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                z-index: 10;
                box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                transition: all 0.3s ease;
        text-shadow:1px 0px 1px #05081a;
            " onmouseover="this.style.background='white'; this.style.transform='translateY(-50%) scale(1.1)'" onmouseout="this.style.background='rgba(255,255,255,0.95)'; this.style.transform='translateY(-50%) scale(1)'">
                <span class="material-icons" style="color: #333; font-size: 28px; font-weight: bold;">chevron_right</span>
            </button>
            
            <!-- Dots Indicator -->
            <div id="heroDots" style="
                position: absolute;
                bottom: 25px;
                left: 0;
                right: 0;
                display: flex;
                justify-content: center;
                gap: 12px;
                z-index: 10;
            "></div>
            
            <!-- Gradient Overlay for Better Text Readability -->
            <div style="
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: linear-gradient(to right, rgba(0,0,0,0.4) 0%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.4) 100%);
                z-index: 1;
            "></div>
        </div>

        <!-- Mobile Responsive Styles -->
        <style>
            @media (max-width: 768px) {
                #blog-page > .container > div:first-child {
                    height: 350px !important;
                    margin-bottom: 30px !important;
                    border-radius: 10px !important;
                }
                
                #heroPrevBtn, #heroNextBtn {
                    width: 42px !important;
                    height: 42px !important;
                    left: 15px !important;
                    right: 15px !important;
                }
                
                .hero-slide h3 {
                    font-size: 1.6rem !important;
                    margin-bottom: 12px !important;
                }
                
                .hero-slide p {
                    font-size: 1rem !important;
                    line-height: 1.5 !important;
                }
                
                .hero-slide-content {
                    padding: 25px !important;
                    margin: 20px !important;
                }
            }
            
            @media (max-width: 480px) {
                #blog-page > .container > div:first-child {
                    height: 300px !important;
                    border-radius: 8px !important;
                }
                
                #heroPrevBtn, #heroNextBtn {
                    width: 38px !important;
                    height: 38px !important;
                }
                
                .hero-slide h3 {
                    font-size: 1.3rem !important;
                    margin-bottom: 10px !important;
                }
                
                .hero-slide p {
                    font-size: 0.9rem !important;
                    line-height: 1.4 !important;
                }
                
                .hero-slide-content {
                    padding: 20px !important;
                    margin: 15px !important;
                }
                
                #heroDots {
                    bottom: 15px !important;
                }
                
                .hero-dot {
                    width: 8px !important;
                    height: 8px !important;
                }
            }
        </style>

               <!-- Search Section -->
                    <div class="search-section">
                        <div class="search-box">
                            <i class="material-icons search-icon">search</i>
                            <input type="text" id="blogSearch" placeholder="Search articles..." onkeyup="searchBlogPosts()">
                        </div>
                    </div>

                    <!-- Blog Posts -->
                    <div class="mdc-card">
                        <div class="card-header">
                            <h2>All Articles</h2>
                            <p>Browse our collection of spiritual insights</p>
                        </div>
                        <div class="card-content">
                            <div id="blogLoading" class="loading-spinner">
                                <div class="spinner"></div>
                                <p>Loading articles...</p>
                            </div>
                            <div class="mdc-grid grid-2" id="blogPosts" style="display: none;"></div>
                        </div>
                        <div class="card-actions">
                            <div class="pagination" id="blogPagination"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Single Blog Post -->
            <div class="page-content" id="single-blog-page">
                <div class="container">
                    <div id="singlePostContent"></div>
                </div>
            </div>

            <!-- About Page -->
            <div class="page-content" id="about-page">
                <div class="container">
                    <div class="mdc-card">
                        <div class="card-header">
                            <h1>About Us</h1>
                            <p>Kingdom Lifestyle Radio Ministry</p>
                        </div>
                        <div class="card-content">
                            <div class="mdc-grid grid-2 mb-4">
                                <div>
                                    <h3>Our Vision</h3>
                                    <p>To be the leading digital gospel platform connecting believers worldwide through Christ-centered media that transforms lives.</p>
                                </div>
                                <div>
                                    <h3>Our Mission</h3>
                                    <p>Deliver 24/7 uplifting Christian content that bridges cultural divides, strengthens faith, and spreads the Gospel through innovative digital platforms.</p>
                                </div>
                            </div>
                            
                            <h3>Our Team</h3>
                            <div class="mdc-grid grid-3 mt-3">
                                <div class="mdc-card">
                                    <div class="card-content text-center">
                                        <div class="blog-image"> <img src="images/team1.png" style="height:150px; width:150px;">
                                        </div>
                                        <h4>Pastor Olalekan</h4>
                                        <p>Founder & Spiritual Director</p>
                                    </div>
                                </div>
                                <div class="mdc-card">
                                    <div class="card-content text-center">
                                        <div class="blog-image">
                                             <img src="images/manager.png" style="height:150px; width:150px;">
                                            </div>
                                        <h4>Manager</h4>
                                        <p>Content Development</p>
                                    </div>
                                </div>
                                <div class="mdc-card">
                                    <div class="card-content text-center">
                                        <div class="blog-image">
                                             <img src="images/voice.png" style="height:150px; width:150px;">
                                            </div>
                                        <h4>Voice Artist</h4>
                                        <p>Creative Production</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Prayer Page -->
            <div class="page-content" id="prayer-page">
                <div class="container">
                    <div class="mdc-card">
                        <div class="card-header">
                            <h1>Prayer Requests</h1>
                            <p>Submit your prayer needs to our intercessory team</p>
                        </div>
                        <div class="card-content">
                            <div id="prayerMessage"></div>
                            <form id="prayerForm">
                                <div class="mdc-textfield">
                                    <label for="prayerName">Your Name *</label>
                                    <input type="text" id="prayerName" required>
                                </div>
                                <div class="mdc-textfield">
                                    <label for="prayerEmail">Email Address</label>
                                    <input type="email" id="prayerEmail">
                                </div>
                                <div class="mdc-textfield">
                                    <label for="prayerPhone">Phone Number</label>
                                    <input type="tel" id="prayerPhone">
                                </div>
                                <div class="mdc-textfield">
                                    <label for="prayerRequest">Your Prayer Request *</label>
                                    <textarea id="prayerRequest" rows="4" required></textarea>
                                </div>
                                <div class="mdc-textfield">
                                    <label>
                                        <input type="checkbox" id="prayerFollowup">
                                        I would like follow-up contact
                                    </label>
                                </div>
                                <button type="submit" class="mdc-button" style="width: 100%;">
                                    Submit Prayer Request
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Donation Page -->
            <div class="page-content" id="donation-page">
                <div class="container">
                    <div class="mdc-card">
                        <div class="card-header">
                            <h1>Support Our Mission</h1>
                            <p>Your donation helps spread the Gospel worldwide</p>
                        </div>
                 <img src="images/char1.jpg" style="height:200px; width:100% ;">        
                        
                        <div class="card-content">
                            <div class="mdc-grid grid-3">
                                <div class="mdc-card">
                                    <div class="card-content">
                                         <img src="images/zenith-bank-logo.png" style="height:70px; width:70px;">
                                        <h4>Zenith Bank (NGN)</h4>
                                        <p><strong>Account:</strong> 1229216755</p>
                                        <p><strong>Name:</strong> Kingdom Lifestyle Charities</p>
                                        <button class="mdc-button text mt-2" onclick="copyToClipboard('1229216755')">
                                            <i class="material-icons">content_copy</i>
                                            Copy
                                        </button>
                                    </div>
                                </div>
                                <div class="mdc-card">
                                    <div class="card-content">
                                           <img src="images/gtbank-logo.png" style="height:70px; width:70px;">
                                        <h4>GTBank (NGN)</h4>
                                        <p><strong>Account:</strong> 0892125365</p>
                                        <p><strong>Name:</strong> Kingdom Lifestyle Charities</p>
                                        <button class="mdc-button text mt-2" onclick="copyToClipboard('0892125365')">
                                            <i class="material-icons">content_copy</i>
                                            Copy
                                        </button>
                                    </div>
                                </div>
                                <div class="mdc-card">
                                    <div class="card-content">
                                           <img src="images/gtbank-logo.png" style="height:70px; width:70px;">
                       
                                        <h4>GTBank (USD)</h4>
                                        <p><strong>Account:</strong> 0892172060</p>
                                        <p><strong>Name:</strong> Kingdom Lifestyle Charities</p>
                                        <button class="mdc-button text mt-2" onclick="copyToClipboard('0892172060')">
                                            <i class="material-icons">content_copy</i>
                                            Copy
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mt-4">
                                <h3>Contact Information</h3>
                                <div class="mdc-grid grid-2 mt-3">
                                    <div>
                                           <img src="images/nigeria-flag.png" style="height:40px; width:40px;">
                       
                                        <h4>Nigeria</h4>
                                        <p>+2349160006614</p>
                                        <p>+2347067873032</p>
                                        <p>Lagos Headquarters</p>
                                    </div>
                                    <div>
   <img src="images/usa-flag.png" style="height:40px; width:40px;">
                                        <h4>USA</h4>
                                        <p>+1 (347) 481-6604</p>
                                        <p>+1 (347) 208-4052</p>
                                        <p>Texas Office</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contact Page -->
            <div class="page-content" id="contact-page">
                <div class="container">
                    <div class="mdc-card">
                        <div class="card-header">
                            <h1>Contact Us</h1>
                            <p>Get in touch with our team</p>
                        </div>
                        <div class="card-content">
                            <div class="mdc-grid grid-2">
                                <div>
                                    <h3>Send Message</h3>
                                    <form id="contactForm">
                                        <div class="mdc-textfield">
                                            <label for="contactName">Your Name *</label>
                                            <input type="text" id="contactName" required>
                                        </div>
                                        <div class="mdc-textfield">
                                            <label for="contactEmail">Email *</label>
                                            <input type="email" id="contactEmail" required>
                                        </div>
                                        <div class="mdc-textfield">
                                            <label for="contactSubject">Subject *</label>
                                            <input type="text" id="contactSubject" required>
                                        </div>
                                        <div class="mdc-textfield">
                                            <label for="contactMessage">Message *</label>
                                            <textarea id="contactMessage" rows="4" required></textarea>
                                        </div>
                                        <button type="submit" class="mdc-button" style="width: 100%;">
                                            Send Message
                                        </button>
                                    </form>
                                </div>
                                <div>
                                    <h3>Connect With Us</h3>
                                    <p class="mb-2">Follow us on social media for updates and inspiration:</p>
                                    
                                    <!-- Responsive Social Media Buttons -->
                                    <div class="share-buttons mt-3">
                                        <a href="https://wa.me/2349160006614" class="share-btn share-whatsapp" target="_blank">
                                            <i class="material-icons">whatshot</i>
                                            WhatsApp
                                        </a>
                                        <a href="https://facebook.com/kingdomLifestyleradio" class="share-btn share-facebook" target="_blank">
                                            <i class="material-icons">facebook</i>
                                            Facebook
                                        </a>
                                        <a href="https://twitter.com/kingdomlifestr" class="share-btn share-twitter" target="_blank">
                                            <i class="material-icons">X</i>
                                            Twitter
                                         </a>
                                        <a href="https://instagram.com/kingdom.lifestyleradio" class="share-btn" style="background: #E4405F;" target="_blank">
                                            <i class="material-icons">camera_alt</i>
                                            Instagram
                                        </a>
                                        <a href="https://youtube.com/@kingdomLifestyle-radio" class="share-btn" style="background: #FF0000;" target="_blank">
                                            <i class="material-icons">videocam</i>
                                            YouTube
                                        </a>
                                        <a href="https://t.me/kingdomlifestyle" class="share-btn share-telegram" target="_blank">
                                            <i class="material-icons">telegram</i>
                                            Telegram
                                        </a>
                                    </div>
               
               
 
                                    
                                    <div class="mt-4">
                                        <h4>Visit Our Website</h4>
                                        <button class="mdc-button outlined mt-2" style="width: 100%;" onclick="window.open('https://kingdomlifestyleradio.com')">
                                              <i class="material-icons">web</i>
                                            KLSR
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Page -->
            <div class="page-content" id="settings-page">
                <div class="container">
                    <!-- Settings Hero with Save Button -->
                    <div class="settings-hero">
                        <div class="settings-hero-content">
                            <div>
                                <h1>Settings</h1>
                                <p>Customize your app experience</p>
                            </div>
                            <button class="mdc-button" onclick="saveSettings()">
                                <i class="material-icons">save</i>
                                Save Changes
                            </button>
                        </div>
                    </div>

                    <!-- Settings Content -->
                    <div class="mdc-card">
                        <div class="card-content">
                            <!-- Theme Settings -->
                            <div class="settings-item">
                                <div class="settings-info">
                                    <div class="settings-title">App Theme</div>
                                    <div class="settings-description">Choose your preferred color scheme</div>
                                </div>
                                <select id="themeSelect" class="mdc-select">
                                    <option value="deep-blue">Deep Blue (Default)</option>
                                    <option value="dark">Dark Mode</option>
                                    </select>
                            </div>

                            <!-- Radio Volume -->
                            <div class="settings-item">
                                <div class="settings-info">
                                    <div class="settings-title">Radio Volume</div>
                                    <div class="settings-description">Adjust radio player volume</div>
                                </div>
                                <input type="range" id="radioVolume" class="mdc-slider" min="0" max="1" step="0.1" value="1">
                            </div>

                            <!-- Podcast Volume -->
                            <div class="settings-item">
                                <div class="settings-info">
                                    <div class="settings-title">Podcast Volume</div>
                                    <div class="settings-description">Adjust podcast player volume</div>
                                </div>
                                <input type="range" id="podcastVolume" class="mdc-slider" min="0" max="1" step="0.1" value="1">
                            </div>

                            <!-- Auto-play -->
                            <div class="settings-item">
                                <div class="settings-info">
                                    <div class="settings-title">Auto-play Radio</div>
                                    <div class="settings-description">Start playing radio when app opens</div>
                                </div>
                                <label class="mdc-switch">
                                    <input type="checkbox" id="autoPlayToggle" checked>
                                    <span class="mdc-switch-slider"></span>
                                </label>
                            </div>

                            <!-- Notifications -->
                            <div class="settings-item">
                                <div class="settings-info">
                                    <div class="settings-title">Notifications</div>
                                    <div class="settings-description">Receive prayer reminders and updates</div>
                                </div>
                                <label class="mdc-switch">
                                    <input type="checkbox" id="notificationsToggle" checked>
                                    <span class="mdc-switch-slider"></span>
                                </label>
                            </div>

                            <!-- Data Saver -->
                            <div class="settings-item">
                                <div class="settings-info">
                                    <div class="settings-title">Data Saver</div>
                                    <div class="settings-description">Reduce data usage for streaming</div>
                                </div>
                                <label class="mdc-switch">
                                    <input type="checkbox" id="dataSaverToggle">
                                    <span class="mdc-switch-slider"></span>
                                </label>
                            </div>

                            <!-- Reset Settings -->
                            <div class="card-actions">
                                <button class="mdc-button outlined" onclick="resetSettings()">
                                    <i class="material-icons">restart_alt</i>
                                    Reset Settings
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Channel Switcher -->
    <div class="channel-switcher" id="channelSwitcher">
        <div class="channel-option active" data-channel="0">
            <i class="material-icons">radio</i>
            <span>English Gospel</span>
        </div>
        <div class="channel-option" data-channel="1">
            <i class="material-icons">radio</i>
            <span>Yoruba Gospel</span>
        </div>
        <div class="channel-option" data-channel="2">
            <i class="material-icons">radio</i>
            <span>Praise Worship</span>
        </div>
    </div>

    <!-- Bottom App Bar with Integrated Player -->
    <footer class="bottom-app-bar">
        <!-- Radio Player Section -->
        <div class="bottom-player-section">
            <div class="player-controls">
                <div class="player-info">
                    <div class="player-title" id="currentStation">Kingdom Lifestyle Radio</div>
                    <div class="player-subtitle" id="currentChannel">Tap to play</div>
                </div>
                <div class="player-buttons">
                    <button class="player-btn" id="prevChannelBtn" aria-label="Previous channel">
                        <i class="material-icons">skip_previous</i>
                    </button>
                    <button class="player-btn primary" id="playPauseBtn" aria-label="Play/Pause">
                        <i class="material-icons" id="playPauseIcon">play_arrow</i>
                    </button>
                    <button class="player-btn" id="nextChannelBtn" aria-label="Next channel">
                        <i class="material-icons">skip_next</i>
                    </button>
                    <button class="player-btn" id="channelMenuBtn" aria-label="Channel menu">
                        <i class="material-icons">tune</i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Navigation Section -->
        <div class="bottom-nav-section">
            <ul class="bottom-nav">
                <li class="nav-item active" data-page="home">
                    <i class="material-icons nav-icon" style="text-shadow:5px 0px 17px #fff;   ">home</i>
                     <span class="nav-label">Home</span>
                </li>
                <li class="nav-item" data-page="podcast">
                    <i class="material-icons nav-icon" style="text-shadow:5px 0px 17px #fff;">podcasts</i>
                    <span class="nav-label">Podcasts</span> 
                </li> 
                <li class="nav-item" data-page="prayer">
                    <i class="material-icons nav-icon" style="text-shadow:5px 0px 17px #fff;">self_improvement</i>
                    <span class="nav-label">Prayer</span>
                </li>
                <li class="nav-item" data-page="blog">
                    <i class="material-icons nav-icon" style="text-shadow:5px 0px 17px #fff;">article</i>
                    <span class="nav-label">Blog</span> 
                </li>
                <li class="nav-item" data-page="more">
                    <i class="material-icons nav-icon" style="text-shadow:5px 0px 17px #fff;">more_horiz</i>
                    <span class="nav-label">More</span> 
                </li>
            </ul>
        </div>
    </footer>

    <!-- Hidden Audio Elements -->
    <audio id="radioAudio" crossorigin="anonymous"></audio>

    <!-- Scripts -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3.2.0/dist/email.min.js"></script>

    <script>
        // Loading Screen Functionality
        function initLoadingScreen() {
            const loadingScreen = document.getElementById('loadingScreen');
            const appWrapper = document.getElementById('appWrapper');
            const progressBar = document.getElementById('progressBar');
            const mottoText = document.getElementById('mottoText');
            
            // Start loading animation
            loadingScreen.classList.add('loading');
            
            // Start progress bar
            progressBar.style.width = '100%';
            
            // Type the motto character by character
            const motto = "God Is Great";
            let charIndex = 0;
            
            function typeMotto() {
                if (charIndex < motto.length) {  
                    const char = motto.charAt(charIndex);
                    const span = document.createElement('span');
                    span.className = 'motto-char';
                    span.textContent = char;
                    span.style.animationDelay = `${charIndex * 0.1}s`; 
                    mottoText.appendChild(span);
                    charIndex++;
                    setTimeout(typeMotto, 150);
                }
            }
            
            // Start typing after a short delay
            setTimeout(typeMotto, 500);
            
            // After 2 seconds, open the book
            setTimeout(() => {
                loadingScreen.classList.remove('loading');
                loadingScreen.classList.add('ready');
            }, 3000);
            
            // After 4 seconds total, show the app
            setTimeout(() => {
                loadingScreen.classList.add('hidden');
                appWrapper.classList.add('loaded');
                
                // Initialize the main app
                initMainApp();
            }, 4000);
        }

        // Initialize AOS
        AOS.init({
            duration: 400,
            easing: 'ease-out-cubic',
            once: true
        });

        // Initialize EmailJS
        emailjs.init('835HY_wRkYBhqdu7d');

        // App State
        const appState = {
            currentPage: 'home',
            radioPlaying: false,
            radioShouldPlay: true,
            currentStation: 0,
            stations: [
                {
                    name: "English Gospel",
                    url: "https://stream.zeno.fm/dqzzz8hwgh9vv",
                    description: "24/7 English Gospel Music"
                },
                {
                    name: "Yoruba Gospel",
                    url: "https://stream.zeno.fm/fqipu4so1qatv",
                    description: "Yoruba Language Worship"
                },
                {
                    name: "Praise Worship",
                    url: "https://stream.zeno.fm/f3wvbbqmdg8uv",
                    description: "Contemporary Praise"
                }
            ],
            settings: {
                theme: 'deep-blue',
                radioVolume: 1,
                podcastVolume: 1,
                autoPlay: true,
                notifications: true,
                dataSaver: false
            },
            blogPage: 1,
            blogPerPage: 6,
            podcastPage: 1,
            podcastPerPage: 10,
            allBlogPosts: [],
            filteredBlogPosts: [],
            blogSlides: [],
            currentBlogSlide: 0,
            blogSlideInterval: null,
            podcastData: {
                episodes: [],
                currentPage: 1,
                totalPages: 1,
                totalEpisodes: 0,
                podcastInfo: {
                    title: "Kingdom Lifestyle Podcast",
                    description: "Welcome to Kingdom Lifestyle Podcast. A platform for the word of Faith, messages, and exhortations capable of lifting up your spirit and nourishing your soul. Join us every Friday and God bless you richly. Amen!"
                }
            },
            currentPodcast: null,
            radioAutoStarted: false,
            heroSlides: [],
            heroCurrentSlide: 0,
            heroAutoSlideInterval: null,
            blogPostsCache: {}, // Cache for blog posts
            podcastCache: {} // Cache for podcast data
        };

        // DOM Elements
        const elements = {
            mainContent: document.getElementById('mainContent'),
            radioAudio: document.getElementById('radioAudio'),
            podcastAudio: document.getElementById('podcastAudio'),
            currentStation: document.getElementById('currentStation'),
            currentChannel: document.getElementById('currentChannel'),
            playPauseBtn: document.getElementById('playPauseBtn'),
            playPauseIcon: document.getElementById('playPauseIcon'),
            channelSwitcher: document.getElementById('channelSwitcher'),
            channelMenuBtn: document.getElementById('channelMenuBtn'),
            prevChannelBtn: document.getElementById('prevChannelBtn'),
            nextChannelBtn: document.getElementById('nextChannelBtn'),
            bottomNavItems: document.querySelectorAll('.nav-item'),
            radioVolume: document.getElementById('radioVolume'),
            podcastVolume: document.getElementById('podcastVolume'),
            themeSelect: document.getElementById('themeSelect'),
            autoPlayToggle: document.getElementById('autoPlayToggle'),
            notificationsToggle: document.getElementById('notificationsToggle'),
            dataSaverToggle: document.getElementById('dataSaverToggle'),
            currentPodcastPlayer: document.getElementById('currentPodcastPlayer'),
            currentPodcastInfo: document.getElementById('currentPodcastInfo'),
            podcastList: document.getElementById('podcastList'),
            podcastLoading: document.getElementById('podcastLoading'),
            podcastPagination: document.getElementById('podcastPagination'),
            podcastStats: document.getElementById('podcastStats'),
            podcastCount: document.getElementById('podcastCount'),
            moreModal: document.getElementById('moreModal'),
            blogHeroSlider: document.getElementById('blogHeroSlider'),
            heroPrevBtn: document.getElementById('heroPrevBtn'),
            heroNextBtn: document.getElementById('heroNextBtn'),
            heroDots: document.getElementById('heroDots'),
            blogPosts: document.getElementById('blogPosts'),
            blogLoading: document.getElementById('blogLoading'),
            blogPagination: document.getElementById('blogPagination')
        };

        // Main App Initialization
        function initMainApp() {
            // Navigation Functions
            function navigateTo(page) {
                // Update state
                appState.currentPage = page;
                
                // Hide all pages
                document.querySelectorAll('.page-content').forEach(p => {
                    p.classList.remove('active');
                });
                
                // Show target page
                const targetPage = document.getElementById(`${page}-page`);
                if (targetPage) {
                    targetPage.classList.add('active');
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                    
                    // Load page content
                    loadPageContent(page);
                }
                
                // Update navigation
                updateNavigation(page);
                
                // Update URL
                history.pushState({ page }, '', `?page=${page}`);
                
                // Close channel switcher if open
                elements.channelSwitcher.classList.remove('active');
                
                // Close more modal if open
                elements.moreModal.classList.remove('active');
            }

            function updateNavigation(page) {
                elements.bottomNavItems.forEach(item => {
                    item.classList.remove('active');
                    if (item.dataset.page === page) {
                        item.classList.add('active');
                    }
                });
                
                // Handle "More" tab
                const morePages = ['about', 'donation', 'contact', 'settings'];
                if (morePages.includes(page)) {
                    document.querySelector('.nav-item[data-page="more"]').classList.add('active');
                }
            }

            // Load page content
            function loadPageContent(page) {
                switch (page) {
                    case 'home':
                        loadHomeHeroSlider();
                        break;
                    case 'blog':
                        loadHeroSlider();
                        loadBlogPosts();
                        break;
                    case 'podcast':
                        loadPodcasts();
                        break;
                    case 'settings':
                        loadSettings();
                        break;
                }
            }

            // Home Hero Slider
            function loadHomeHeroSlider() {
                const slider = document.getElementById('homeHeroSlider');
                const slides = slider.querySelectorAll('.hero-slide');
                let currentSlide = 0;
                
                function showSlide(index) {
                    slides.forEach(slide => slide.classList.remove('active'));
                    slides[index].classList.add('active');
                }
                
                function nextSlide() {
                    currentSlide = (currentSlide + 1) % slides.length;
                    showSlide(currentSlide);
                }
                
                // Auto rotate every 5 seconds
                setInterval(nextSlide, 5000);
            }

            // Radio Functions with Persistent Playback
            function initRadio() {
                updateRadioDisplay();
                
                // Set initial volume
                elements.radioAudio.volume = appState.settings.radioVolume;
                
                // Play/Pause button
                elements.playPauseBtn.addEventListener('click', toggleRadioPlay);
                
                // Channel navigation
                elements.prevChannelBtn.addEventListener('click', () => switchChannel(-1));
                elements.nextChannelBtn.addEventListener('click', () => switchChannel(1));
                
                // Channel menu
                elements.channelMenuBtn.addEventListener('click', toggleChannelSwitcher);
                
                // Channel switcher options
                document.querySelectorAll('.channel-option').forEach(option => {
                    option.addEventListener('click', function() {
                        const channel = parseInt(this.dataset.channel);
                        if (channel !== appState.currentStation) {
                            appState.currentStation = channel;
                            updateRadioDisplay();
                            updateChannelSwitcher();
                            if (appState.radioPlaying) {
                                playRadio();
                            }
                            toggleChannelSwitcher();
                        }
                    });
                });
                
                // Close channel switcher when clicking outside
                document.addEventListener('click', (e) => {
                    if (!elements.channelSwitcher.contains(e.target) && 
                        !elements.channelMenuBtn.contains(e.target) &&
                        elements.channelSwitcher.classList.contains('active')) {
                        toggleChannelSwitcher();
                    }
                });
                
                // Handle audio events
                elements.radioAudio.addEventListener('playing', () => {
                    appState.radioPlaying = true;
                    elements.playPauseIcon.textContent = 'pause';
                    console.log('Radio is playing');
                });
                
                elements.radioAudio.addEventListener('pause', () => {
                    // Only pause if user intentionally paused
                    if (appState.radioShouldPlay) {
                        console.log('Radio was paused unintentionally, restarting...');
                        setTimeout(() => {
                            if (appState.radioShouldPlay && !appState.radioPlaying) {
                                playRadio();
                            }
                        }, 100);
                    } else {
                        appState.radioPlaying = false;
                        elements.playPauseIcon.textContent = 'play_arrow';
                    }
                });
                
                elements.radioAudio.addEventListener('ended', () => {
                    console.log('Radio stream ended, restarting...');
                    if (appState.radioShouldPlay) {
                        setTimeout(() => {
                            playRadio();
                        }, 1000);
                    }
                });
                
                elements.radioAudio.addEventListener('error', (e) => {
                    console.error('Audio error:', e);
                    // Don't show error alert for auto-play
                    if (!appState.radioAutoStarted) {
                         
                    }
                    appState.radioAutoStarted = false;
                    
                    // Try to reconnect after error
                    if (appState.radioShouldPlay) {
                        console.log('Attempting to reconnect radio...');
                        setTimeout(() => {
                            playRadio();
                        }, 3000);
                    }
                });
                
                // Monitor network connectivity
                window.addEventListener('online', () => {
                    console.log('Network connection restored');
                    if (appState.radioShouldPlay && !appState.radioPlaying) {
                        setTimeout(() => {
                            playRadio();
                        }, 1000);
                    }
                });
                
                // Auto-play radio on page load - IMMEDIATELY
                if (appState.settings.autoPlay && !appState.radioPlaying) {
                    setTimeout(() => {
                        playRadioSilently();
                    }, 500); // Reduced delay for immediate playback
                }
            }

            function updateRadioDisplay() {
                const station = appState.stations[appState.currentStation];
                elements.currentStation.textContent = station.name;
                elements.currentChannel.textContent = station.description;
                elements.radioAudio.src = station.url;
            }

            function toggleRadioPlay() {
                if (appState.radioPlaying) {
                    // User intentionally paused
                    appState.radioShouldPlay = false;
                    pauseRadio();
                } else {
                    // User wants to play
                    appState.radioShouldPlay = true;
                    playRadio();
                }
            }

            function playRadio() {
                appState.radioAutoStarted = false;
                appState.radioShouldPlay = true;
                
                // Ensure audio element is ready
                elements.radioAudio.load();
                
                elements.radioAudio.play()
                    .then(() => {
                        appState.radioPlaying = true;
                        elements.playPauseIcon.textContent = 'pause';
                        console.log('Radio playback started successfully');
                        showAlert(`Now playing: ${appState.stations[appState.currentStation].name}`);
                    })
                    .catch(error => {
                        console.error('Playback error:', error);
                        // Try again with different strategies
                        if (!appState.radioAutoStarted) {
                             
                        } 
                        
                        // Try to play after user interaction
                        if (appState.radioShouldPlay) {
                            setTimeout(() => {
                                elements.radioAudio.play().catch(e => {
                                    console.error('Retry failed:', e);
                                });
                            }, 1000);
                        }
                    });
            }

            function playRadioSilently() {
                appState.radioAutoStarted = true;
                appState.radioShouldPlay = true;
                
                elements.radioAudio.play()
                    .then(() => {
                        appState.radioPlaying = true;
                        elements.playPauseIcon.textContent = 'pause';
                        console.log('Radio auto-started successfully');
                    })
                    .catch(error => {
                        console.error('Auto-play error (silent):', error);
                        appState.radioAutoStarted = false;
                        
                        // Try again after a delay
                        if (appState.radioShouldPlay) {
                            setTimeout(() => {
                                elements.radioAudio.play().catch(e => {
                                    console.error('Auto-play retry failed:', e);
                                });
                            }, 2000);
                        }
                    });
            }

            function pauseRadio() {
                appState.radioShouldPlay = false;
                elements.radioAudio.pause();
                appState.radioPlaying = false;
                elements.playPauseIcon.textContent = 'play_arrow';
                console.log('Radio paused by user');
            }

            function switchChannel(direction) {
                appState.currentStation = (appState.currentStation + direction + appState.stations.length) % appState.stations.length;
                updateRadioDisplay();
                updateChannelSwitcher();
                if (appState.radioPlaying) {
                    playRadio();
                }
            }

            function toggleChannelSwitcher() {
                elements.channelSwitcher.classList.toggle('active');
            }

            function updateChannelSwitcher() {
                document.querySelectorAll('.channel-option').forEach((option, index) => {
                    option.classList.toggle('active', index === appState.currentStation);
                });
            }

            // More Modal Functions
            function toggleMoreModal() {
                elements.moreModal.classList.toggle('active');
                
                // Close when clicking outside
                if (elements.moreModal.classList.contains('active')) {
                    setTimeout(() => {
                        const closeHandler = (e) => {
                            if (!elements.moreModal.contains(e.target) && 
                                !document.querySelector('.nav-item[data-page="more"]').contains(e.target)) {
                                elements.moreModal.classList.remove('active');
                                document.removeEventListener('click', closeHandler);
                            }
                        };
                        document.addEventListener('click', closeHandler);
                    }, 0);
                }
            }

            // Settings Functions
            function loadSettings() {
                // Load saved settings
                const savedSettings = localStorage.getItem('klsr_settings');
                if (savedSettings) {
                    appState.settings = { ...appState.settings, ...JSON.parse(savedSettings) };
                }
                
                // Update UI with current settings
                elements.themeSelect.value = appState.settings.theme;
                elements.radioVolume.value = appState.settings.radioVolume;
                elements.podcastVolume.value = appState.settings.podcastVolume;
                elements.autoPlayToggle.checked = appState.settings.autoPlay;
                elements.notificationsToggle.checked = appState.settings.notifications;
                elements.dataSaverToggle.checked = appState.settings.dataSaver;
                
                // Apply theme
                applyTheme(appState.settings.theme);
            }

            function saveSettings() {
                // Update settings from UI
                appState.settings.theme = elements.themeSelect.value;
                appState.settings.radioVolume = parseFloat(elements.radioVolume.value);
                appState.settings.podcastVolume = parseFloat(elements.podcastVolume.value);
                appState.settings.autoPlay = elements.autoPlayToggle.checked;
                appState.settings.notifications = elements.notificationsToggle.checked;
                appState.settings.dataSaver = elements.dataSaverToggle.checked;
                
                // Save to localStorage
                localStorage.setItem('klsr_settings', JSON.stringify(appState.settings));
                
                // Apply changes
                applyTheme(appState.settings.theme);
                elements.radioAudio.volume = appState.settings.radioVolume;
                elements.podcastAudio.volume = appState.settings.podcastVolume;
                
                showAlert('Settings saved successfully!');
                
                // Restart radio if auto-play is enabled
                if (appState.settings.autoPlay && !appState.radioPlaying) {
                    appState.radioShouldPlay = true;
                    setTimeout(playRadioSilently, 500);
                }
            }

            function resetSettings() {
                if (confirm('Reset all settings to default?')) {
                    localStorage.removeItem('klsr_settings');
                    appState.settings = {
                        theme: 'deep-blue',
                        radioVolume: 1,
                        podcastVolume: 1,
                        autoPlay: true,
                        notifications: true,
                        dataSaver: false
                    };
                    loadSettings();
                    showAlert('Settings reset to default');
                }
            }

            function applyTheme(theme) {
                // Remove all theme classes
                document.body.classList.remove('theme-deep-blue', 'theme-dark' );
                
                // Add selected theme class
                document.body.classList.add(`theme-${theme}`);
            }

            // Blog Hero Slider Functions - ULTRA FAST LOADING
            async function loadHeroSlider() {
                if (!elements.blogHeroSlider) return;
                
                // Show loading immediately
                elements.blogHeroSlider.innerHTML = `
                    <div style="
                        height: 100%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        background: linear-gradient(135deg, #0a0f2d 0%, #1a235c 100%);
                        color: white;
                        text-align: center;
                        padding: 40px;
                        border-radius: 12px;
                    ">
                        <div>
                            <h3 style="font-size: 1.8rem; margin-bottom: 15px;">Latest Articles</h3>
                            <p>Loading...</p>
                        </div>
                    </div>
                `;
                
                try {
                    // Check cache first
                    const cacheKey = 'blog_hero_slides';
                    const cachedData = localStorage.getItem(cacheKey);
                    const now = Date.now();
                    
                    if (cachedData) {
                        const { data, timestamp } = JSON.parse(cachedData);
                        // Use cache if less than 5 minutes old
                        if (now - timestamp < 5 * 60 * 1000) {
                            renderHeroSlider(data);
                            return;
                        }
                    }
                    
                    // Fetch with timeout
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 5000); // 5 second timeout
                    
                    // Load only 3 latest posts with minimal data
                    const response = await fetch(
                        'https://kingdomlifestyleradio.com/wp/wp-json/wp/v2/posts?per_page=3&_fields=id,title,date,excerpt,featured_media,_links&_embed',
                        { signal: controller.signal }
                    ).finally(() => clearTimeout(timeoutId));
                    
                    if (!response.ok) throw new Error('Failed to load hero posts');
                    
                    const posts = await response.json();
                    
                    // Cache the data
                    localStorage.setItem(cacheKey, JSON.stringify({
                        data: posts,
                        timestamp: now
                    }));
                    
                    renderHeroSlider(posts);
                    
                } catch (error) {
                    console.error('Error loading hero slider:', error);
                    // Use fallback content
                    elements.blogHeroSlider.innerHTML = `
                        <div style="
                            height: 100%;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            background: linear-gradient(135deg, #0a0f2d 0%, #1a235c 100%);
                            color: white;
                            text-align: center;
                            padding: 40px;
                            border-radius: 12px;
                        ">
                            <div>
                                <h3 style="font-size: 1.8rem; margin-bottom: 15px;">Latest Articles</h3>
                                <p>Stay tuned for inspiring content!</p>
                                <button onclick="loadHeroSlider()" style="
                                    margin-top: 20px;
                                    background: white;
                                    color: #333;
                                    border: none;
                                    padding: 10px 25px;
                                    border-radius: 25px;
                                    font-weight: 600;
                                    cursor: pointer;
                                ">
                                    Refresh
                                </button>
                            </div>
                        </div>
                    `;
                }
            }

            function renderHeroSlider(posts) {
                // Clear existing content
                elements.blogHeroSlider.innerHTML = '';
                elements.heroDots.innerHTML = '';
                appState.heroSlides = [];
                
                // If no posts, show placeholder
                if (!posts || posts.length === 0) {
                    elements.blogHeroSlider.innerHTML = `
                        <div style="
                            height: 100%;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            background: linear-gradient(135deg, #0a0f2d 0%, #1a235c 100%);
                            color: white;
                            text-align: center;
                            padding: 40px;
                            border-radius: 12px;
                        ">
                            <div>
                                <h3 style="font-size: 1.8rem; margin-bottom: 15px;">Latest Articles</h3>
                                <p>New content coming soon!</p>
                            </div>
                        </div>
                    `;
                    return;
                }
                
                // Preload images
                posts.forEach(post => {
                    const image = post._embedded?.['wp:featuredmedia']?.[0]?.source_url;
                    if (image) {
                        const img = new Image();
                        img.src = image;
                    }
                });
                
                // Create slides
                posts.forEach((post, index) => {
                    const image = post._embedded?.['wp:featuredmedia']?.[0]?.source_url || '';
                    const date = new Date(post.date).toLocaleDateString('en-US', {
                        month: 'short',
                        day: 'numeric',
                        year: 'numeric'
                    });
                    
                    const slide = document.createElement('div');
                    slide.className = 'hero-slide';
                    slide.style.cssText = `
                        position: absolute;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        opacity: ${index === 0 ? '1' : '0'};
                        transition: opacity 0.6s ease-in-out;
                        background-image: url('${image || 'images/herr1.webp'}');
                        background-size: cover;
                        background-position: center;
                        background-repeat: no-repeat;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                    `;
                    
                    slide.innerHTML = `
                        <div class="hero-slide-content" style="
                            position: relative;
                            z-index: 2;
                            color: white;
                            max-width: 800px;
                            width: 90%;
                            padding: 40px;
                            margin: 0 auto;
                            text-align: center;
                            text-shadow: 0 2px 10px rgba(0,0,0,0.8);
                        ">
                            <div style="
                                background: rgba(0, 0, 0, 0.7);
                                padding: 35px;
                                border-radius: 12px;
                                backdrop-filter: blur(8px);
                                border: 1px solid rgba(255,255,255,0.1);
                                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                            ">
                                <h3 style="
                                    margin: 0 0 20px 0;
                                    font-size: 2.2rem;
                                    line-height: 1.3;
                                    font-weight: 700;
                                    letter-spacing: -0.5px; text-shadow:1px 0px 1px #fff;
                                ">${post.title.rendered || post.title}</h3>
                              
                                <div style="
                                    display: flex;
                                    justify-content: center;
                                    align-items: center;
                                    gap: 30px;
                                    flex-wrap: wrap;
                                ">
                                    <span style="
                                        font-size: 1rem;
                                        opacity: 0.9;
                                        background: rgba(255,255,255,0.15);
                                        padding: 8px 16px;
                                        border-radius: 20px;
                                        backdrop-filter: blur(5px); text-shadow:1px 0px 1px #fff;
                                    ">
                                         ${date}
                                    </span>
                                    <button onclick="loadSinglePost(${post.id})" style="
                                        background: linear-gradient(to right, #4facfe 0%, #05081a 100%);
                                        color: white;
                                        border: none;
                                        padding: 12px 32px;
                                        border-radius: 30px;
                                        font-weight: 600;
                                        font-size: 1rem;
                                        cursor: pointer;
                                        transition: all 0.3s ease;
                                        box-shadow: 0 4px 15px rgba(0, 242, 254, 0.3);
                                        letter-spacing: 0.5px;
                                    " onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 6px 20px rgba(0, 242, 254, 0.4)'" 
                                    onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(0, 242, 254, 0.3)'">
                                        Read Article 
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                    
                    elements.blogHeroSlider.appendChild(slide);
                    appState.heroSlides.push(slide);
                    
                    // Create dot
                    const dot = document.createElement('button');
                    dot.className = 'hero-dot';
                    dot.style.cssText = `
                        width: 12px;
                        height: 12px;
                        border-radius: 50%;
                        border: 2px solid white;
                        background: ${index === 0 ? 'white' : 'transparent'};
                        cursor: pointer;
                        transition: all 0.3s ease;
                        padding: 0;
                    `;
                    dot.onclick = () => showHeroSlide(index);
                    elements.heroDots.appendChild(dot);
                });
                
                // Initialize carousel
                appState.heroCurrentSlide = 0;
                
                // Set up navigation
                elements.heroNextBtn.onclick = nextHeroSlide;
                elements.heroPrevBtn.onclick = prevHeroSlide;
                
                // Start auto-sliding
                startAutoSlide();
                
                // Pause on hover
                elements.blogHeroSlider.addEventListener('mouseenter', () => {
                    clearInterval(appState.heroAutoSlideInterval);
                });
                
                elements.blogHeroSlider.addEventListener('mouseleave', () => {
                    startAutoSlide();
                });
            }

            function showHeroSlide(index) {
                if (appState.heroSlides.length === 0) return;
                
                // Update current slide
                appState.heroCurrentSlide = index;
                
                // Show the selected slide, hide others
                appState.heroSlides.forEach((slide, i) => {
                    slide.style.opacity = i === index ? '1' : '0';
                });
                
                // Update dots
                const dots = document.querySelectorAll('.hero-dot');
                dots.forEach((dot, i) => {
                    dot.style.background = i === index ? 'white' : 'transparent';
                });
            }

            function nextHeroSlide() {
                if (appState.heroSlides.length === 0) return;
                
                const nextIndex = (appState.heroCurrentSlide + 1) % appState.heroSlides.length;
                showHeroSlide(nextIndex);
            }

            function prevHeroSlide() {
                if (appState.heroSlides.length === 0) return;
                
                const prevIndex = (appState.heroCurrentSlide - 1 + appState.heroSlides.length) % appState.heroSlides.length;
                showHeroSlide(prevIndex);
            }

            function startAutoSlide() {
                // Clear any existing interval
                if (appState.heroAutoSlideInterval) {
                    clearInterval(appState.heroAutoSlideInterval);
                }
                
                // Start new interval if we have slides
                if (appState.heroSlides.length > 0) {
                    appState.heroAutoSlideInterval = setInterval(() => {
                        nextHeroSlide();
                    }, 4000); // Change slide every 4 seconds
                }
            }

            // Blog Posts with Pagination - FIXED
            async function loadBlogPosts(page = 1) {
                if (!elements.blogPosts || !elements.blogLoading) return;
                
                elements.blogLoading.style.display = 'flex';
                elements.blogPosts.style.display = 'none';
                elements.blogPagination.innerHTML = '';
                
                try {
                    // Check cache first
                    const cacheKey = `blog_posts_page_${page}`;
                    const cachedData = localStorage.getItem(cacheKey);
                    const now = Date.now();
                    
                    if (cachedData) {
                        const { data, totalPages, totalPosts, timestamp } = JSON.parse(cachedData);
                        // Use cache if less than 10 minutes old
                        if (now - timestamp < 10 * 60 * 1000) {
                            renderBlogPosts(data, page, totalPages, totalPosts);
                            return;
                        }
                    }
                    
                    // Fetch with timeout
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 10000); // 10 second timeout
                    
                    const response = await fetch(
                        `https://kingdomlifestyleradio.com/wp/wp-json/wp/v2/posts?per_page=${appState.blogPerPage}&page=${page}&_embed`,
                        { signal: controller.signal }
                    ).finally(() => clearTimeout(timeoutId));
                    
                    if (!response.ok) throw new Error('Failed to load posts');
                    
                    const posts = await response.json();
                    const totalPosts = parseInt(response.headers.get('X-WP-Total')) || 0;
                    const totalPages = parseInt(response.headers.get('X-WP-TotalPages')) || 1;
                    
                    // Cache the data
                    localStorage.setItem(cacheKey, JSON.stringify({
                        data: posts,
                        totalPages: totalPages,
                        totalPosts: totalPosts,
                        timestamp: now
                    }));
                    
                    renderBlogPosts(posts, page, totalPages, totalPosts);
                    
                } catch (error) {
                    console.error('Error loading blog posts:', error);
                    elements.blogLoading.innerHTML = `
                        <div class="alert alert-error">
                            <p>Unable to load blog posts. Please check your connection and try again.</p>
                            <button class="mdc-button mt-2" onclick="loadBlogPosts(${page})">Retry</button>
                        </div>
                    `;
                }
            }

            function renderBlogPosts(posts, currentPage, totalPages, totalPosts) {
                appState.allBlogPosts = posts;
                appState.filteredBlogPosts = posts;
                appState.blogPage = currentPage;
                
                if (posts.length === 0) {
                    elements.blogPosts.innerHTML = `
                        <div class="alert" style="grid-column: 1 / -1;">
                            <p>No blog posts found.</p>
                        </div>
                    `;
                } else {
                    elements.blogPosts.innerHTML = posts.map(post => {
                        const image = post._embedded?.['wp:featuredmedia']?.[0]?.source_url;
                        const excerpt = post.excerpt.rendered.replace(/<[^>]+>/g, '').substring(0, 150) + '...';
                        const date = new Date(post.date).toLocaleDateString('en-US', {
                            year: 'numeric',
                            month: 'short',
                            day: 'numeric'
                        });
                        const author = post._embedded?.author?.[0]?.name || 'Admin';
                        
                        return `
                            <div class="podcast-item" onclick="loadSinglePost(${post.id})">
                                ${image ? `<img src="${image}" alt="${post.title.rendered}" loading="lazy">` : 
                                `<div style="height: 200px; background: var(--mdc-gradient); border-radius: var(--mdc-border-radius); display: flex; align-items: center; justify-content: center; color: white; font-size: 2rem; margin-bottom: var(--mdc-spacing-md);">${post.title.rendered.charAt(0)}</div>`}
                                <div class="podcast-meta">
                                    <span><i class="material-icons">calendar_today</i> ${date}</span>
                                    <span><i class="material-icons">person</i> ${author}</span>
                                </div>
                                <h3>${post.title.rendered}</h3>
                                <p>${excerpt}</p>
                                <button class="mdc-button text">Read More</button>
                            </div>
                        `;
                    }).join('');
                }
                
                elements.blogLoading.style.display = 'none';
                elements.blogPosts.style.display = 'grid';
                
                // Render pagination if there are multiple pages
                if (totalPages > 1) {
                    renderPagination('blogPagination', currentPage, totalPages, (p) => {
                        loadBlogPosts(p);
                    });
                }
            }

            // Blog Pagination Function
            function renderBlogPagination(currentPage, totalPages) {
                const container = document.getElementById('blogPagination');
                if (!container || totalPages <= 1) {
                    container.innerHTML = '';
                    return;
                }
                
                let paginationHtml = '';
                
                // Previous button
                if (currentPage > 1) {
                    paginationHtml += `
                        <button class="page-btn" onclick="loadBlogPosts(${currentPage - 1})">
                            <i class="material-icons">chevron_left</i>
                        </button>
                    `;
                }
                
                // Page numbers
                const maxVisible = 5;
                let startPage = Math.max(1, currentPage - Math.floor(maxVisible / 2));
                let endPage = Math.min(totalPages, startPage + maxVisible - 1);
                
                if (endPage - startPage + 1 < maxVisible) {
                    startPage = Math.max(1, endPage - maxVisible + 1);
                }
                
                for (let i = startPage; i <= endPage; i++) {
                    paginationHtml += `
                        <button class="page-btn ${i === currentPage ? 'active' : ''}" 
                                onclick="loadBlogPosts(${i})">
                            ${i}
                        </button>
                    `;
                }
                
                // Next button
                if (currentPage < totalPages) {
                    paginationHtml += `
                        <button class="page-btn" onclick="loadBlogPosts(${currentPage + 1})">
                            <i class="material-icons">chevron_right</i>
                        </button>
                    `;
                }
                
                container.innerHTML = paginationHtml;
            }

            async function loadSinglePost(postId) {
                navigateTo('single-blog');
                
                const container = document.getElementById('singlePostContent');
                container.innerHTML = `
                    <div class="loading-spinner">
                        <div class="spinner"></div>
                        <p>Loading post...</p>
                    </div>
                `;
                
                try {
                    // Check cache first
                    const cacheKey = `blog_post_${postId}`;
                    const cachedData = localStorage.getItem(cacheKey);
                    const now = Date.now();
                    
                    if (cachedData) {
                        const { data, timestamp } = JSON.parse(cachedData);
                        // Use cache if less than 30 minutes old
                        if (now - timestamp < 30 * 60 * 1000) {
                            renderSinglePost(data);
                            return;
                        }
                    }
                    
                    const response = await fetch(
                        `https://kingdomlifestyleradio.com/wp/wp-json/wp/v2/posts/${postId}?_embed`
                    );
                    
                    if (!response.ok) throw new Error('Failed to load post');
                    
                    const post = await response.json();
                    
                    // Cache the data
                    localStorage.setItem(cacheKey, JSON.stringify({
                        data: post,
                        timestamp: now
                    }));
                    
                    renderSinglePost(post);
                    
                } catch (error) {
                    console.error('Error loading post:', error);
                    container.innerHTML = `
                        <div class="alert alert-error">
                            <p>Unable to load this post. Please try again later.</p>
                            <button class="mdc-button mt-2" onclick="navigateTo('blog')">Back to Blog</button>
                        </div>
                    `;
                }
            }

            function renderSinglePost(post) {
                const container = document.getElementById('singlePostContent');
                const image = post._embedded?.['wp:featuredmedia']?.[0]?.source_url;
                const date = new Date(post.date).toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
                const author = post._embedded?.author?.[0]?.name || 'Admin';
                const currentUrl = window.location.origin + window.location.pathname + `?post=${post.id}`;
                const postTitle = post.title.rendered;
                const postExcerpt = post.excerpt.rendered.replace(/<[^>]+>/g, '').substring(0, 150) + '...';
                
                container.innerHTML = `
                    <div class="mdc-card">
                        <button class="mdc-button text mb-3" onclick="navigateTo('blog')">
                            <i class="material-icons">arrow_back</i>
                            Back to Blog
                        </button>
                        
                        ${image ? `<img src="${image}" alt="${postTitle}" style="width: 100%; height: 300px; object-fit: cover; border-radius: var(--mdc-border-radius); margin-bottom: var(--mdc-spacing-lg);" loading="lazy">` : 
                          `<div style="height: 300px; background: var(--mdc-gradient); border-radius: var(--mdc-border-radius); display: flex; align-items: center; justify-content: center; color: white; font-size: 4rem; margin-bottom: var(--mdc-spacing-lg);">${postTitle.charAt(0)}</div>`}
                        
                        <div class="card-content">
                            <div class="podcast-meta">
                                <span><i class="material-icons">calendar_today</i> ${date}</span>
                                <span><i class="material-icons">person</i> ${author}</span>
                            </div>
                            
                            <h1>${postTitle}</h1>
                            <div class="post-content">${post.content.rendered}</div>
                            
                            <!-- Share Buttons -->
                            <div class="mt-4">
                                <h3>Share this post</h3>
                                <div class="share-buttons">
                                    <button class="share-btn share-facebook" onclick="sharePost('facebook', '${encodeURIComponent(currentUrl)}', '${encodeURIComponent(postTitle)}', '${encodeURIComponent(postExcerpt)}')">
                                        <i class="material-icons">facebook</i>
                                        Facebook
                                    </button>
                                    <button class="share-btn share-twitter" onclick="sharePost('twitter', '${encodeURIComponent(currentUrl)}', '${encodeURIComponent(postTitle)}', '${encodeURIComponent(postExcerpt)}')">
                                        <i class="material-icons">X</i>
                                        Twitter
                                    </button>
                                    <button class="share-btn share-whatsapp" onclick="sharePost('whatsapp', '${encodeURIComponent(currentUrl)}', '${encodeURIComponent(postTitle)}', '${encodeURIComponent(postExcerpt)}')">
                                        <i class="material-icons">whatshot</i>
                                        WhatsApp
                                    </button>
                                    <button class="share-btn share-telegram" onclick="sharePost('telegram', '${encodeURIComponent(currentUrl)}', '${encodeURIComponent(postTitle)}', '${encodeURIComponent(postExcerpt)}')">
                                        <i class="material-icons">telegram</i>
                                        Telegram
                                    </button>
                                    <button class="share-btn share-linkedin" onclick="sharePost('linkedin', '${encodeURIComponent(currentUrl)}', '${encodeURIComponent(postTitle)}', '${encodeURIComponent(postExcerpt)}')">
                                        <i class="material-icons">link</i>
                                        LinkedIn
                                    </button>
                                    <button class="share-btn share-email" onclick="sharePost('email', '${encodeURIComponent(currentUrl)}', '${encodeURIComponent(postTitle)}', '${encodeURIComponent(postExcerpt)}')">
                                        <i class="material-icons">email</i>
                                        Email
                                    </button>
                                    <button class="share-btn share-copy" onclick="copyToClipboard('${currentUrl}')">
                                        <i class="material-icons">content_copy</i>
                                        Copy Link
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            // Share Post Function
            function sharePost(platform, url, title, excerpt) {
                const decodedUrl = decodeURIComponent(url);
                const decodedTitle = decodeURIComponent(title);
                const decodedExcerpt = decodeURIComponent(excerpt);
                
                let shareUrl = '';
                
                switch(platform) {
                    case 'facebook':
                        shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${url}&quote=${title}`;
                        break;
                    case 'twitter':
                        shareUrl = `https://twitter.com/intent/tweet?url=${url}&text=${title}&hashtags=KLSR,Gospel`;
                        break;
                    case 'whatsapp':
                        shareUrl = `https://wa.me/?text=${title}%20${url}`;
                        break;
                    case 'telegram':
                        shareUrl = `https://t.me/share/url?url=${url}&text=${title}`;
                        break;
                    case 'linkedin':
                        shareUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${url}`;
                        break;
                    case 'email':
                        shareUrl = `mailto:?subject=${title}&body=${decodedExcerpt}%0A%0ARead more: ${decodedUrl}`;
                        break;
                    default:
                        return;
                }
                
                if (platform === 'email') {
                    window.location.href = shareUrl;
                } else {
                    window.open(shareUrl, '_blank', 'noopener,noreferrer');
                }
            }

            function searchBlogPosts() {
                const searchTerm = document.getElementById('blogSearch').value.toLowerCase();
                if (!searchTerm) {
                    appState.filteredBlogPosts = appState.allBlogPosts;
                } else {
                    appState.filteredBlogPosts = appState.allBlogPosts.filter(post => 
                        post.title.rendered.toLowerCase().includes(searchTerm) ||
                        post.excerpt.rendered.toLowerCase().includes(searchTerm)
                    );
                }
                displayFilteredBlogPosts();
            }

            function displayFilteredBlogPosts() {
                const container = document.getElementById('blogPosts');
                if (appState.filteredBlogPosts.length === 0) {
                    container.innerHTML = `
                        <div class="alert" style="grid-column: 1 / -1;">
                            <p>No articles found matching your search. Try different keywords.</p>
                        </div>
                    `;
                    return;
                }
                
                container.innerHTML = appState.filteredBlogPosts.map(post => {
                    const image = post._embedded?.['wp:featuredmedia']?.[0]?.source_url;
                    const excerpt = post.excerpt.rendered.replace(/<[^>]+>/g, '').substring(0, 150) + '...';
                    const date = new Date(post.date).toLocaleDateString('en-US', {
                        year: 'numeric',
                        month: 'short',
                        day: 'numeric'
                    });
                    const author = post._embedded?.author?.[0]?.name || 'Admin';
                    
                    return `
                        <div class="podcast-item" onclick="loadSinglePost(${post.id})">
                            ${image ? `<img src="${image}" alt="${post.title.rendered}" loading="lazy">` : 
                              `<div style="height: 200px; background: var(--mdc-gradient); border-radius: var(--mdc-border-radius); display: flex; align-items: center; justify-content: center; color: white; font-size: 2rem; margin-bottom: var(--mdc-spacing-md);">${post.title.rendered.charAt(0)}</div>`}
                            <div class="podcast-meta">
                                <span><i class="material-icons">calendar_today</i> ${date}</span>
                                <span><i class="material-icons">person</i> ${author}</span>
                            </div>
                            <h3>${post.title.rendered}</h3>
                            <p>${excerpt}</p>
                            <button class="mdc-button text">Read More</button>
                        </div>
                    `;
                }).join('');
                
                // Hide pagination for search results
                document.getElementById('blogPagination').innerHTML = '';
            }

            // PODCAST FUNCTIONS with PAGINATION FIXED
            async function loadPodcasts(page = 1) {
                elements.podcastLoading.style.display = 'flex';
                elements.podcastList.style.display = 'none';
                elements.podcastPagination.style.display = 'none';
                elements.currentPodcastPlayer.style.display = 'none';
                
                try {
                    // Use your RSS feed URL
                    const rssUrl = "https://anchor.fm/s/1d6ad87c/podcast/rss";
                    
                    // Check cache first
                    const cacheKey = `podcasts_all`;
                    const cachedData = localStorage.getItem(cacheKey);
                    const now = Date.now();
                    
                    let allEpisodes = [];
                    let podcastInfo = {};
                    
                    if (cachedData) {
                        const { data, info, timestamp } = JSON.parse(cachedData);
                        // Use cache if less than 1 hour old
                        if (now - timestamp < 60 * 60 * 1000) {
                            allEpisodes = data;
                            podcastInfo = info;
                        }
                    }
                    
                    if (allEpisodes.length === 0) {
                        // Fetch RSS XML with timeout
                        const controller = new AbortController();
                        const timeoutId = setTimeout(() => controller.abort(), 15000); // 15 second timeout
                        
                        const response = await fetch(rssUrl, { signal: controller.signal })
                            .finally(() => clearTimeout(timeoutId));
                        
                        if (!response.ok) throw new Error('Failed to load RSS feed');
                        
                        const rssText = await response.text();
                        
                        // Parse RSS XML
                        const parser = new DOMParser();
                        const xmlDoc = parser.parseFromString(rssText, "text/xml");
                        
                        // Get podcast info
                        const channel = xmlDoc.querySelector('channel');
                        const podcastTitle = channel.querySelector('title')?.textContent || 'Kingdom Lifestyle Podcast';
                        const podcastDescription = channel.querySelector('description')?.textContent || 'Welcome to Kingdom Lifestyle Podcast.';
                        
                        podcastInfo = {
                            title: podcastTitle,
                            description: podcastDescription
                        };
                        
                        // Get all items
                        const items = xmlDoc.querySelectorAll('item');
                        
                        // Process podcast episodes
                        allEpisodes = Array.from(items).map((item, index) => {
                            // Extract data from RSS item
                            const title = item.querySelector('title')?.textContent || `Episode ${index + 1}`;
                            const description = item.querySelector('description')?.textContent || '';
                            const pubDate = item.querySelector('pubDate')?.textContent || new Date().toISOString();
                            const itunesImage = item.querySelector('itunes\\:image, image')?.getAttribute('href');
                            const enclosure = item.querySelector('enclosure');
                            const audioUrl = enclosure?.getAttribute('url') || '';
                            const duration = item.querySelector('itunes\\:duration')?.textContent || '';
                            
                            // Clean description
                            const cleanDescription = description.replace(/<[^>]+>/g, '').substring(0, 200) + '...';
                            
                            // Use podcast image or fallback
                            const imageUrl = itunesImage || 'https://images.unsplash.com/photo-1511379938547-c1f69419868d?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80';
                            
                            return {
                                id: index + 1,
                                title: title,
                                description: cleanDescription,
                                fullDescription: description,
                                pubDate: pubDate,
                                audio: audioUrl,
                                duration: duration,
                                image: imageUrl,
                                author: item.querySelector('author')?.textContent || 'Kingdom Lifestyle Radio'
                            };
                        }).filter(episode => episode.audio); // Only include episodes with audio
                        
                        // Cache the data
                        localStorage.setItem(cacheKey, JSON.stringify({
                            data: allEpisodes,
                            info: podcastInfo,
                            timestamp: now
                        }));
                    }
                    
                    // Update app state
                    appState.podcastData.episodes = allEpisodes;
                    appState.podcastData.totalEpisodes = allEpisodes.length;
                    appState.podcastData.totalPages = Math.ceil(allEpisodes.length / appState.podcastPerPage);
                    appState.podcastData.currentPage = page;
                    appState.podcastData.podcastInfo = podcastInfo;
                    
                    renderPodcasts(allEpisodes, page, Math.ceil(allEpisodes.length / appState.podcastPerPage), allEpisodes.length);
                    
                } catch (error) {
                    console.error('Error loading podcasts:', error);
                    
                    // Fallback to demo data
                    const demoEpisodes = [
                        {
                            id: 1,
                            title: "Morning Devotion - Start Your Day Right",
                            description: "Begin your day with spiritual nourishment and biblical insights for a productive and blessed day.",
                            fullDescription: "Begin your day with spiritual nourishment and biblical insights for a productive and blessed day. This episode will guide you through morning prayers and scripture readings.",
                            pubDate: new Date().toISOString(),
                            audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",
                            duration: "15:30",
                            image: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
                            author: "Pastor Olalekan"
                        },
                        {
                            id: 2,
                            title: "Faith in Action - Practical Christianity",
                            description: "Learn how to apply biblical principles in your daily life with practical examples and real-life applications.",
                            fullDescription: "Learn how to apply biblical principles in your daily life with practical examples and real-life applications. Discover how faith can transform your everyday decisions and relationships.",
                            pubDate: new Date(Date.now() - 86400000).toISOString(),
                            audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3",
                            duration: "22:15",
                            image: "https://images.unsplash.com/photo-1544717305-99670f9c28f3?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
                            author: "Kingdom Team"
                        },
                        {
                            id: 3,
                            title: "Prayer Warriors - Intercessory Insights",
                            description: "Deepen your prayer life with powerful teaching on intercession, spiritual warfare, and effective prayer strategies.",
                            fullDescription: "Deepen your prayer life with powerful teaching on intercession, spiritual warfare, and effective prayer strategies. Learn how to pray effectively for yourself, your family, and your community.",
                            pubDate: new Date(Date.now() - 172800000).toISOString(),
                            audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3",
                            duration: "18:45",
                            image: "https://images.unsplash.com/photo-1511379938547-c1f69419868d?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
                            author: "Prayer Ministry"
                        }
                    ];
                    
                    appState.podcastData.episodes = demoEpisodes;
                    appState.podcastData.totalEpisodes = demoEpisodes.length;
                    appState.podcastData.totalPages = 1;
                    appState.podcastData.currentPage = 1;
                    
                    // Update podcast stats
                    if (elements.podcastStats && elements.podcastCount) {
                        elements.podcastStats.style.display = 'block';
                        elements.podcastCount.textContent = demoEpisodes.length;
                    }
                    
                    renderPodcasts(demoEpisodes, 1, 1, demoEpisodes.length);
                    
                     
                }
            }

            function renderPodcasts(allEpisodes, currentPage, totalPages, totalEpisodes) {
                // Update podcast stats
                if (elements.podcastStats && elements.podcastCount) {
                    elements.podcastStats.style.display = 'block';
                    elements.podcastCount.textContent = totalEpisodes;
                }
                
                // Calculate pagination
                const start = (currentPage - 1) * appState.podcastPerPage;
                const end = start + appState.podcastPerPage;
                const pageEpisodes = allEpisodes.slice(start, end);
                
                // Display podcast list
                if (pageEpisodes.length === 0) {
                    elements.podcastList.innerHTML = `
                        <div class="alert" style="width: 100%;">
                            <p>No podcast episodes available at the moment. Please check back later.</p>
                        </div>
                    `;
                } else {
                    elements.podcastList.innerHTML = pageEpisodes.map(podcast => {
                        const date = new Date(podcast.pubDate).toLocaleDateString('en-US', {
                            year: 'numeric',
                            month: 'short',
                            day: 'numeric'
                        });
                        
                        return `
                            <div class="podcast-item" onclick="playPodcast(${podcast.id})">
                                <img src="${podcast.image}" alt="${podcast.title}" loading="lazy" onerror="this.src='https://images.unsplash.com/photo-1511379938547-c1f69419868d?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80'">
                                <div class="podcast-meta">
                                    <span><i class="material-icons">calendar_today</i> ${date}</span>
                                    ${podcast.duration ? `<span><i class="material-icons">schedule</i> ${podcast.duration}</span>` : ''}
                                </div>
                                <h3>${podcast.title}</h3>
                                <p>${podcast.description}</p>
                                <div class="card-actions">
                                    <button class="mdc-button">
                                        <i class="material-icons">play_arrow</i>
                                        Play Episode
                                    </button>
                                </div>
                            </div>
                        `;
                    }).join('');
                }
                
                // Show elements
                elements.podcastLoading.style.display = 'none';
                elements.podcastList.style.display = 'block';
                
                // Render pagination if needed
                if (totalPages > 1) {
                    elements.podcastPagination.style.display = 'flex';
                    renderPagination('podcastPagination', currentPage, totalPages, (p) => {
                        loadPodcasts(p);
                    });
                }
            }

            // Podcast Pagination Function
            function renderPodcastPagination(currentPage, totalPages) {
                const container = document.getElementById('podcastPagination');
                if (!container || totalPages <= 1) {
                    container.innerHTML = '';
                    return;
                }
                
                let paginationHtml = '';
                
                // Previous button
                if (currentPage > 1) {
                    paginationHtml += `
                        <button class="page-btn" onclick="loadPodcasts(${currentPage - 1})">
                            <i class="material-icons">chevron_left</i>
                        </button>
                    `;
                }
                
                // Page numbers
                const maxVisible = 5;
                let startPage = Math.max(1, currentPage - Math.floor(maxVisible / 2));
                let endPage = Math.min(totalPages, startPage + maxVisible - 1);
                
                if (endPage - startPage + 1 < maxVisible) {
                    startPage = Math.max(1, endPage - maxVisible + 1);
                }
                
                for (let i = startPage; i <= endPage; i++) {
                    paginationHtml += `
                        <button class="page-btn ${i === currentPage ? 'active' : ''}" 
                                onclick="loadPodcasts(${i})">
                            ${i}
                        </button>
                    `;
                }
                
                // Next button
                if (currentPage < totalPages) {
                    paginationHtml += `
                        <button class="page-btn" onclick="loadPodcasts(${currentPage + 1})">
                            <i class="material-icons">chevron_right</i>
                        </button>
                    `;
                }
                
                container.innerHTML = paginationHtml;
            }

            function playPodcast(podcastId) {
                const podcast = appState.podcastData.episodes.find(p => p.id === podcastId);
                if (!podcast || !podcast.audio) {
                     
                }
                
                // Update current podcast
                appState.currentPodcast = podcast;
                
                // Update player display
                elements.currentPodcastPlayer.style.display = 'block';
                elements.currentPodcastInfo.innerHTML = `
                    <h4>${podcast.title}</h4>
                    <p>${podcast.fullDescription || podcast.description}</p>
                    <div class="podcast-meta">
                        <span><i class="material-icons">calendar_today</i> ${new Date(podcast.pubDate).toLocaleDateString()}</span>
                        ${podcast.duration ? `<span><i class="material-icons">schedule</i> ${podcast.duration}</span>` : ''}
                        <span><i class="material-icons">person</i> ${podcast.author}</span>
                    </div>
                `;
                
                // Set audio source and play
                elements.podcastAudio.src = podcast.audio;
                elements.podcastAudio.volume = appState.settings.podcastVolume;
                
                elements.podcastAudio.play()
                    .then(() => showAlert(`Now playing: ${podcast.title}`))
                    .catch(e => {
                        console.error('Playback error:', e);
                         
                    });
            }

            // Generic Pagination Function
            function renderPagination(containerId, currentPage, totalPages, callback) {
                const container = document.getElementById(containerId);
                if (!container || totalPages <= 1) {
                    container.innerHTML = '';
                    return;
                }
                
                let paginationHtml = '';
                
                // Previous button
                if (currentPage > 1) {
                    paginationHtml += `
                        <button class="page-btn" onclick="(${callback.toString()})(${currentPage - 1})">
                            <i class="material-icons">chevron_left</i>
                        </button>
                    `;
                }
                
                // Page numbers
                const maxVisible = 5;
                let startPage = Math.max(1, currentPage - Math.floor(maxVisible / 2));
                let endPage = Math.min(totalPages, startPage + maxVisible - 1);
                
                if (endPage - startPage + 1 < maxVisible) {
                    startPage = Math.max(1, endPage - maxVisible + 1);
                }
                
                for (let i = startPage; i <= endPage; i++) {
                    paginationHtml += `
                        <button class="page-btn ${i === currentPage ? 'active' : ''}" 
                                onclick="(${callback.toString()})(${i})">
                            ${i}
                        </button>
                    `;
                }
                
                // Next button
                if (currentPage < totalPages) {
                    paginationHtml += `
                        <button class="page-btn" onclick="(${callback.toString()})(${currentPage + 1})">
                            <i class="material-icons">chevron_right</i>
                        </button>
                    `;
                }
                
                container.innerHTML = paginationHtml;
            }

            // Utility Functions
            function showAlert(message, type = 'success') {
                const alertDiv = document.createElement('div');
                alertDiv.className = `alert alert-${type}`;
                alertDiv.innerHTML = `
                    <p>${message}</p>
                    <button class="mdc-button text" onclick="this.parentElement.remove()" style="float: right; margin-top: -8px;">
                        <i class="material-icons">close</i>
                    </button>
                `;
                
                const mainContent = document.querySelector('.main-content');
                if (mainContent.firstChild) {
                    mainContent.insertBefore(alertDiv, mainContent.firstChild);
                } else {
                    mainContent.appendChild(alertDiv);
                }
                
                setTimeout(() => {
                    if (alertDiv.parentElement) {
                        alertDiv.remove();
                    }
                }, 5000);
            }

            function copyToClipboard(text) {
                navigator.clipboard.writeText(text)
                    .then(() => showAlert('Copied to clipboard!'))
                    .catch(() => showAlert('Failed to copy', 'error'));
            }

            // Form Handlers
            document.getElementById('prayerForm')?.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                const formData = {
                    name: document.getElementById('prayerName').value,
                    email: document.getElementById('prayerEmail').value,
                    phone: document.getElementById('prayerPhone').value,
                    request: document.getElementById('prayerRequest').value,
                    followup: document.getElementById('prayerFollowup').checked
                };
                
                try {
                    await emailjs.send('service_bg462kr', 'template_6pyapsf', {
                        to_email: 'robinlaura101@gmail.com',
                        from_name: formData.name,
                        from_email: formData.email,
                        phone: formData.phone,
                        message: formData.request,
                        followup: formData.followup ? 'Yes' : 'No'
                    });
                    
                    showAlert('Prayer request submitted! Our team will pray for you.');
                    this.reset();
                    
                } catch (error) {
                    console.error('Email error:', error);
                    showAlert('Thank you for your prayer request. Our team will pray for you.', 'success');
                    this.reset();
                }
            });

            document.getElementById('contactForm')?.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                const formData = {
                    name: document.getElementById('contactName').value,
                    email: document.getElementById('contactEmail').value,
                    subject: document.getElementById('contactSubject').value,
                    message: document.getElementById('contactMessage').value
                };
                
                try {
                    await emailjs.send('service_bg462kr', 'template_6pyapsf', {
                        to_email: 'robinlaura101@gmail.com',
                        from_name: formData.name,
                        from_email: formData.email,
                        subject: formData.subject,
                        message: formData.message
                    });
                    
                    showAlert('Message sent! We\'ll get back to you soon.');
                    this.reset();
                    
                } catch (error) {
                    console.error('Email error:', error);
                    showAlert('Thank you for your message. We\'ll be in touch soon.', 'success');
                    this.reset();
                }
            });

            // Performance Optimizations - CACHES FEATURES
            function setupPerformanceOptimizations() {
                // Service Worker for caching (if supported)
                if ('serviceWorker' in navigator) {
                    navigator.serviceWorker.register('/sw.js').catch(console.error);
                }
                
                // Preload critical images
                const criticalImages = [
                    'images/logo.png',
                    'images/herr1.webp',
                    'images/herr2.webp',
                    'images/herr3.webp',
                    'images/herr4.webp'
                ];
                
                criticalImages.forEach(src => {
                    const link = document.createElement('link');
                    link.rel = 'preload';
                    link.as = 'image';
                    link.href = src;
                    document.head.appendChild(link);
                });
                
                // Lazy load images
                if ('IntersectionObserver' in window) {
                    const imageObserver = new IntersectionObserver((entries) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                const img = entry.target;
                                img.src = img.dataset.src;
                                img.classList.remove('lazy');
                                imageObserver.unobserve(img);
                            }
                        });
                    });
                    
                    document.querySelectorAll('img[data-src]').forEach(img => {
                        imageObserver.observe(img);
                    });
                }
            }

            // Event Listeners
            function setupEventListeners() {
                // Initialize radio
                initRadio();
                
                // Load settings
                loadSettings();
                
                // Navigation events
                elements.bottomNavItems.forEach(item => {
                    item.addEventListener('click', function() {
                        const page = this.dataset.page;
                        if (page === 'more') {
                            toggleMoreModal();
                        } else {
                            navigateTo(page);
                        }
                    });
                });
                
                // Settings button in header
                document.getElementById('settingsBtn').addEventListener('click', () => {
                    navigateTo('settings');
                });
                
                // Search button
                document.getElementById('searchBtn').addEventListener('click', () => {
                    navigateTo('blog');
                    setTimeout(() => {
                        document.getElementById('blogSearch').focus();
                    }, 300);
                });
                
                // Volume controls
                elements.radioVolume.addEventListener('input', function() {
                    appState.settings.radioVolume = parseFloat(this.value);
                    elements.radioAudio.volume = appState.settings.radioVolume;
                });
                
                elements.podcastVolume.addEventListener('input', function() {
                    appState.settings.podcastVolume = parseFloat(this.value);
                    elements.podcastAudio.volume = appState.settings.podcastVolume;
                });
                
                // Handle URL parameters
                const urlParams = new URLSearchParams(window.location.search);
                const page = urlParams.get('page') || 'home';
                const postId = urlParams.get('post');
                
                if (postId) {
                    loadSinglePost(postId);
                } else {
                    navigateTo(page);
                }
                
                // Handle back/forward navigation
                window.addEventListener('popstate', function(event) {
                    if (event.state && event.state.page) {
                        navigateTo(event.state.page);
                    }
                });
                
                // Setup performance optimizations
                setupPerformanceOptimizations();
            }

            // Expose functions to global scope
            window.navigateTo = navigateTo;
            window.loadSinglePost = loadSinglePost;
            window.toggleRadioPlay = toggleRadioPlay;
            window.copyToClipboard = copyToClipboard;
            window.sharePost = sharePost;
            window.playPodcast = playPodcast;
            window.searchBlogPosts = searchBlogPosts;
            window.saveSettings = saveSettings;
            window.resetSettings = resetSettings;
            window.toggleMoreModal = toggleMoreModal;
            window.loadHeroSlider = loadHeroSlider;
            window.loadBlogPosts = loadBlogPosts;
            window.loadPodcasts = loadPodcasts;

            // Setup event listeners
            setupEventListeners();
            
            // Load blog hero slider when blog page is loaded
            if (appState.currentPage === 'blog') {
                loadHeroSlider();
            }
        }

        // Start the loading screen when page loads
        document.addEventListener('DOMContentLoaded', initLoadingScreen);
    </script>
</body>
</html>
